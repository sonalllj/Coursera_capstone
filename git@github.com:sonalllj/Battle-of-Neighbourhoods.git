{
    "nbformat_minor": 1, 
    "cells": [
        {
            "source": "# Coursera Capstone Project", 
            "cell_type": "markdown", 
            "metadata": {
                "collapsed": true
            }
        }, 
        {
            "source": "## The Battle Of Neighborhoods (Week 1)", 
            "cell_type": "markdown", 
            "metadata": {}
        }, 
        {
            "source": "This notebook contains-\n1. A description of the problem and a discussion of the background. \n2. A description of the data and how it will be used to solve the problem.", 
            "cell_type": "markdown", 
            "metadata": {}
        }, 
        {
            "source": "### Contents", 
            "cell_type": "markdown", 
            "metadata": {}
        }, 
        {
            "source": "1.Introduction Section : \u2043 Discussion of the business problem and the interested audience in this project.\n\n2.Data Section:\n    \u2043 Description of the data that will be used to solve the problem and the sources.\n    \n3.Methodology section \u2043 Discussion and description of exploratory data analysis carried out, any inferential statistical testing performed, and if \n  any machine learnings were used establishing the strategy and purposes.\n\n4.Results section \u2043 Discussion of the results.\n\n5.Discussion section \u2043 Elaboration and discussion on any observations noted and any recommendations suggested based on the results.\n\n6.Conclusion section \u2043 Report Conclusion", 
            "cell_type": "markdown", 
            "metadata": {}
        }, 
        {
            "source": "## 1. Introduction Section", 
            "cell_type": "markdown", 
            "metadata": {}
        }, 
        {
            "source": "### Discussion of the business problem and the audience who would be interested in this project.", 
            "cell_type": "markdown", 
            "metadata": {}
        }, 
        {
            "source": "I am an analyst residing in the city of Pune in the country India. The area I live in is a 2 minute ride from the airport, is a 5 minute walk from the largest mall in the city, has more than 7 bakeries in a 100 m sq radius, consists of 4 nigh clubs and many other amenities such as various international cuisine restaurants, cafes, park, gyms, shops and repair shops. I am currently working with a leading consulting firm. This firm has offered me an opportunity to work for a project in New York City for a period of 1 and a half year. Here I wish to compare the two cities and find myself a place to stay that could be as similar as the area I currently reside in. The apartment in Manhattan must meet the following demands", 
            "cell_type": "markdown", 
            "metadata": {}
        }, 
        {
            "source": "\u2022\t1 bedroom apartment.\n\n\u2022\tdesired location is near a metro station in the Manhattan area and within 1.0 mile (1.6 km) radius\n\n\u2022\tprice of rent not exceed $7,000 per month\n\n\u2022\ttop amenities in the selected neighborhood shall be similar to current residence\n\n\u2022\tdesirable to have venues such as coffee shops, restaurants Asian Thai, wine stores, gym and food shops\n\n\u2022\tas a reference, I have included a map of venues near current residence in Pune.\n", 
            "cell_type": "markdown", 
            "metadata": {}
        }, 
        {
            "source": "### Business Problem:", 
            "cell_type": "markdown", 
            "metadata": {}
        }, 
        {
            "source": "The challenge is to find a suitable apartment for rent in Manhattan NY that complies with the demands on location, price and venues. The data required to resolve this challenge is described in the following section 2, below.", 
            "cell_type": "markdown", 
            "metadata": {}
        }, 
        {
            "source": "### Interested Audience", 
            "cell_type": "markdown", 
            "metadata": {}
        }, 
        {
            "source": "This project could be helpful to anyone who is moving to another country for work or for study. The same methodology can be applied in accordance to demands as applicable. This case is also applicable for anyone interested in exploring starting or locating a new business in any city. ", 
            "cell_type": "markdown", 
            "metadata": {}
        }, 
        {
            "source": "## 2. Data Section:", 
            "cell_type": "markdown", 
            "metadata": {}
        }, 
        {
            "source": "### Description of the Data", 
            "cell_type": "markdown", 
            "metadata": {}
        }, 
        {
            "source": "The following data is required to answer the issues of the problem:", 
            "cell_type": "markdown", 
            "metadata": {}
        }, 
        {
            "source": "* List of Boroughs and neighborhoods of Manhattan with their geodata (latitude and longitude)\n* List of Subway metro stations in Manhattan with their address location\n* List of apartments for rent in Manhattan area with their addresses and price\n* Preferably, a list of apartment for rent with additional information, such as price, address, area, # of beds, etc\n* Venues for each Manhattan neighborhood ( than can be clustered)\n* Venues for subway metro stations, as needed", 
            "cell_type": "markdown", 
            "metadata": {}
        }, 
        {
            "source": "### How the data will be used to solve the problem", 
            "cell_type": "markdown", 
            "metadata": {}
        }, 
        {
            "source": "The data will be used as follows:", 
            "cell_type": "markdown", 
            "metadata": {}
        }, 
        {
            "source": "* Use Foursquare and geopy data to map top 10 venues for all Manhattan neighborhoods and clustered in groups ( as per Course LAB)\n* Use foursquare and geopy data to map the location of subway metro stations , separately and on top of the above clustered map in order to be able to identify the venues and ammenities near each metro station, or explore each subway location separately\n* Use Foursquare and geopy data to map the location of rental places, in some form, linked to the subway locations.\n  create a map that depicts, for instance, the average rental price per square ft, around a radious of 1.0 mile (1.6 km) around each subway station - or a similar metrics. I will be able to quickly point to the popups to know the relative price per subway area.\n* Addresses from rental locations will be converted to geodata( lat, long) using Geopy-distance and Nominatim.\n* Data will be searched in open data sources if available, from real estate sites if open to reading, libraries or other government agencies such as Metro New York MTA, etc.", 
            "cell_type": "markdown", 
            "metadata": {}
        }, 
        {
            "source": "The procesing of these DATA will allow to answer the key questions to make a decision:\n\n* what is the cost of rent (per square ft) around a mile radius from each subway metro station?\n* what is the area of Manhattan with best rental pricing that meets criteria established?\n* What is the distance from work place ( Park Ave and 53 rd St) and the tentative future home?\n* What are the venues of the two best places to live? How the prices compare?\n* How venues distribute among Manhattan neighborhoods and around metro stations?\n* Are there tradeoffs between size and price and location?\n* Any other interesting statistical data findings of the real estate and overall data.", 
            "cell_type": "markdown", 
            "metadata": {}
        }, 
        {
            "source": "## Importing the libraries", 
            "cell_type": "markdown", 
            "metadata": {}
        }, 
        {
            "execution_count": 4, 
            "cell_type": "code", 
            "metadata": {}, 
            "outputs": [
                {
                    "output_type": "stream", 
                    "name": "stdout", 
                    "text": "Solving environment: done\n\n## Package Plan ##\n\n  environment location: /opt/conda/envs/Python36\n\n  added / updated specs: \n    - folium=0.5.0\n\n\nThe following packages will be downloaded:\n\n    package                    |            build\n    ---------------------------|-----------------\n    altair-3.1.0               |           py36_0         724 KB  conda-forge\n    ca-certificates-2019.6.16  |       hecc5488_0         145 KB  conda-forge\n    openssl-1.1.1c             |       h516909a_0         2.1 MB  conda-forge\n    vincent-0.4.4              |             py_1          28 KB  conda-forge\n    branca-0.3.1               |             py_0          25 KB  conda-forge\n    certifi-2019.6.16          |           py36_1         149 KB  conda-forge\n    folium-0.5.0               |             py_0          45 KB  conda-forge\n    ------------------------------------------------------------\n                                           Total:         3.2 MB\n\nThe following NEW packages will be INSTALLED:\n\n    altair:          3.1.0-py36_0      conda-forge\n    branca:          0.3.1-py_0        conda-forge\n    folium:          0.5.0-py_0        conda-forge\n    vincent:         0.4.4-py_1        conda-forge\n\nThe following packages will be UPDATED:\n\n    ca-certificates: 2019.5.15-0                   --> 2019.6.16-hecc5488_0 conda-forge\n    certifi:         2019.6.16-py36_0              --> 2019.6.16-py36_1     conda-forge\n\nThe following packages will be DOWNGRADED:\n\n    openssl:         1.1.1c-h7b6447c_1             --> 1.1.1c-h516909a_0    conda-forge\n\n\nDownloading and Extracting Packages\naltair-3.1.0         | 724 KB    | ##################################### | 100% \nca-certificates-2019 | 145 KB    | ##################################### | 100% \nopenssl-1.1.1c       | 2.1 MB    | ##################################### | 100% \nvincent-0.4.4        | 28 KB     | ##################################### | 100% \nbranca-0.3.1         | 25 KB     | ##################################### | 100% \ncertifi-2019.6.16    | 149 KB    | ##################################### | 100% \nfolium-0.5.0         | 45 KB     | ##################################### | 100% \nPreparing transaction: done\nVerifying transaction: done\nExecuting transaction: done\nLibraries imported.\n"
                }
            ], 
            "source": "import numpy as np # library to handle data in a vectorized manner\nimport time\nimport pandas as pd # library for data analsysis\npd.set_option('display.max_columns', None)\npd.set_option('display.max_rows', None)\n\nimport json # library to handle JSON files\nimport requests # library to handle requests\nfrom pandas.io.json import json_normalize # tranform JSON file into a pandas dataframe\n\nfrom geopy.geocoders import Nominatim # convert an address into latitude and longitude values\n!conda install -c conda-forge folium=0.5.0 --yes # uncomment this line if you haven't completed the Foursquare API lab\nimport folium # map rendering library\n\nprint('Libraries imported.')"
        }, 
        {
            "source": "### Reference of venues around current residence in Pune for comparison to Manhattan place", 
            "cell_type": "markdown", 
            "metadata": {}
        }, 
        {
            "execution_count": 21, 
            "cell_type": "code", 
            "metadata": {}, 
            "outputs": [
                {
                    "output_type": "stream", 
                    "name": "stderr", 
                    "text": "/opt/conda/envs/Python36/lib/python3.6/site-packages/ipykernel/__main__.py:3: DeprecationWarning: Using Nominatim with the default \"geopy/1.18.1\" `user_agent` is strongly discouraged, as it violates Nominatim's ToS https://operations.osmfoundation.org/policies/nominatim/ and may possibly cause 403 and 429 HTTP errors. Please specify a custom `user_agent` with `Nominatim(user_agent=\"my-application\")` or by overriding the default `user_agent`: `geopy.geocoders.options.default_user_agent = \"my-application\"`. In geopy 2.0 this will become an exception.\n  app.launch_new_instance()\n"
                }, 
                {
                    "output_type": "stream", 
                    "name": "stdout", 
                    "text": "The geograpical coordinate of Pune home are 18.5677772, 73.9183559.\n"
                }
            ], 
            "source": "address = 'VimanNagar, Pune'\n\ngeolocator = Nominatim()\nlocation = geolocator.geocode(address)\nlatitude = location.latitude\nlongitude = location.longitude\nprint('The geograpical coordinate of Pune home are {}, {}.'.format(latitude, longitude))"
        }, 
        {
            "execution_count": 13, 
            "cell_type": "code", 
            "metadata": {}, 
            "outputs": [], 
            "source": "neighborhood_latitude=18.5666\nneighborhood_longitude=73.9154"
        }, 
        {
            "execution_count": 7, 
            "cell_type": "code", 
            "metadata": {}, 
            "outputs": [], 
            "source": "CLIENT_ID = 'HZCARJUGNQ0BJ5OCUFV2S5KIBAKV4TI0ZOK4JQUQFFFZI0VT' # your Foursquare ID\nCLIENT_SECRET = 'TRXXZQBI0JDAGXDB1EFJOVJCLGNTSF5KMGOEC4P4GD5W3IIS' # your Foursquare Secret\nVERSION = '20180605' # Foursquare API version"
        }, 
        {
            "execution_count": 14, 
            "cell_type": "code", 
            "metadata": {}, 
            "outputs": [
                {
                    "execution_count": 14, 
                    "metadata": {}, 
                    "data": {
                        "text/plain": "'https://api.foursquare.com/v2/venues/explore?&client_id=HZCARJUGNQ0BJ5OCUFV2S5KIBAKV4TI0ZOK4JQUQFFFZI0VT&client_secret=TRXXZQBI0JDAGXDB1EFJOVJCLGNTSF5KMGOEC4P4GD5W3IIS&v=20180605&ll=18.5666,73.9154&radius=500&limit=100'"
                    }, 
                    "output_type": "execute_result"
                }
            ], 
            "source": "LIMIT = 100 # limit of number of venues returned by Foursquare API\nradius = 500 # define radius\n\n# create URL\nurl = 'https://api.foursquare.com/v2/venues/explore?&client_id={}&client_secret={}&v={}&ll={},{}&radius={}&limit={}'.format(\n    CLIENT_ID, \n    CLIENT_SECRET, \n    VERSION, \n    neighborhood_latitude, \n    neighborhood_longitude, \n    radius, \n    LIMIT)\nurl # display URL"
        }, 
        {
            "execution_count": 15, 
            "cell_type": "code", 
            "metadata": {}, 
            "outputs": [], 
            "source": "results = requests.get(url).json()"
        }, 
        {
            "execution_count": 16, 
            "cell_type": "code", 
            "metadata": {}, 
            "outputs": [], 
            "source": "def get_category_type(row):\n    try:\n        categories_list = row['categories']\n    except:\n        categories_list = row['venue.categories']\n        \n    if len(categories_list) == 0:\n        return None\n    else:\n        return categories_list[0]['name']"
        }, 
        {
            "execution_count": 19, 
            "cell_type": "code", 
            "metadata": {}, 
            "outputs": [
                {
                    "execution_count": 19, 
                    "metadata": {}, 
                    "data": {
                        "text/html": "<div>\n<style scoped>\n    .dataframe tbody tr th:only-of-type {\n        vertical-align: middle;\n    }\n\n    .dataframe tbody tr th {\n        vertical-align: top;\n    }\n\n    .dataframe thead th {\n        text-align: right;\n    }\n</style>\n<table border=\"1\" class=\"dataframe\">\n  <thead>\n    <tr style=\"text-align: right;\">\n      <th></th>\n      <th>name</th>\n      <th>categories</th>\n      <th>lat</th>\n      <th>lng</th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr>\n      <th>0</th>\n      <td>Perks 'N' Brews</td>\n      <td>Coffee Shop</td>\n      <td>18.567873</td>\n      <td>73.914766</td>\n    </tr>\n    <tr>\n      <th>1</th>\n      <td>Natural Ice Cream</td>\n      <td>Ice Cream Shop</td>\n      <td>18.567612</td>\n      <td>73.917748</td>\n    </tr>\n    <tr>\n      <th>2</th>\n      <td>Chopsticks Spice Malabar</td>\n      <td>Southern / Soul Food Restaurant</td>\n      <td>18.565245</td>\n      <td>73.913116</td>\n    </tr>\n    <tr>\n      <th>3</th>\n      <td>Falahaar</td>\n      <td>Juice Bar</td>\n      <td>18.565390</td>\n      <td>73.918158</td>\n    </tr>\n    <tr>\n      <th>4</th>\n      <td>Khalsa Dairy</td>\n      <td>Cheese Shop</td>\n      <td>18.565183</td>\n      <td>73.914468</td>\n    </tr>\n    <tr>\n      <th>5</th>\n      <td>PVR Cinemas</td>\n      <td>Multiplex</td>\n      <td>18.562506</td>\n      <td>73.916613</td>\n    </tr>\n    <tr>\n      <th>6</th>\n      <td>Irani Cafe</td>\n      <td>Caf\u00e9</td>\n      <td>18.563905</td>\n      <td>73.915019</td>\n    </tr>\n    <tr>\n      <th>7</th>\n      <td>Cafe Coffee Day</td>\n      <td>Coffee Shop</td>\n      <td>18.566079</td>\n      <td>73.918249</td>\n    </tr>\n    <tr>\n      <th>8</th>\n      <td>Kaveri</td>\n      <td>Indian Restaurant</td>\n      <td>18.566443</td>\n      <td>73.918315</td>\n    </tr>\n    <tr>\n      <th>9</th>\n      <td>Incognito - Restaurant, Bar And Cafe</td>\n      <td>American Restaurant</td>\n      <td>18.562864</td>\n      <td>73.916410</td>\n    </tr>\n    <tr>\n      <th>10</th>\n      <td>Chopsticks</td>\n      <td>Indian Restaurant</td>\n      <td>18.565228</td>\n      <td>73.913179</td>\n    </tr>\n    <tr>\n      <th>11</th>\n      <td>Atmosphere 6</td>\n      <td>Lounge</td>\n      <td>18.565483</td>\n      <td>73.913750</td>\n    </tr>\n    <tr>\n      <th>12</th>\n      <td>Sambar</td>\n      <td>Breakfast Spot</td>\n      <td>18.563567</td>\n      <td>73.917934</td>\n    </tr>\n    <tr>\n      <th>13</th>\n      <td>Where Else</td>\n      <td>Caf\u00e9</td>\n      <td>18.565311</td>\n      <td>73.913977</td>\n    </tr>\n    <tr>\n      <th>14</th>\n      <td>Picantos Mexican Grill</td>\n      <td>Mexican Restaurant</td>\n      <td>18.565423</td>\n      <td>73.910978</td>\n    </tr>\n    <tr>\n      <th>15</th>\n      <td>Himalaya Momos</td>\n      <td>Dumpling Restaurant</td>\n      <td>18.566085</td>\n      <td>73.910820</td>\n    </tr>\n    <tr>\n      <th>16</th>\n      <td>Tea Villa Cafe</td>\n      <td>Caf\u00e9</td>\n      <td>18.562925</td>\n      <td>73.918076</td>\n    </tr>\n    <tr>\n      <th>17</th>\n      <td>Starbucks</td>\n      <td>Coffee Shop</td>\n      <td>18.562580</td>\n      <td>73.916834</td>\n    </tr>\n    <tr>\n      <th>18</th>\n      <td>Largo Pizzeria</td>\n      <td>Pizza Place</td>\n      <td>18.566287</td>\n      <td>73.919850</td>\n    </tr>\n    <tr>\n      <th>19</th>\n      <td>Farmaish Restaurant and Lounge</td>\n      <td>Restaurant</td>\n      <td>18.567143</td>\n      <td>73.918985</td>\n    </tr>\n    <tr>\n      <th>20</th>\n      <td>Cream Centre</td>\n      <td>Vegetarian / Vegan Restaurant</td>\n      <td>18.562635</td>\n      <td>73.916724</td>\n    </tr>\n    <tr>\n      <th>21</th>\n      <td>Foodhall</td>\n      <td>Gourmet Shop</td>\n      <td>18.562399</td>\n      <td>73.916535</td>\n    </tr>\n    <tr>\n      <th>22</th>\n      <td>Sujata Mastani</td>\n      <td>Dessert Shop</td>\n      <td>18.565400</td>\n      <td>73.915169</td>\n    </tr>\n    <tr>\n      <th>23</th>\n      <td>Zara</td>\n      <td>Clothing Store</td>\n      <td>18.562420</td>\n      <td>73.916680</td>\n    </tr>\n    <tr>\n      <th>24</th>\n      <td>Crazy Noodles</td>\n      <td>Chinese Restaurant</td>\n      <td>18.562483</td>\n      <td>73.916501</td>\n    </tr>\n    <tr>\n      <th>25</th>\n      <td>Punjabi Dhaba</td>\n      <td>Indian Restaurant</td>\n      <td>18.565137</td>\n      <td>73.911484</td>\n    </tr>\n    <tr>\n      <th>26</th>\n      <td>Cafe Milano</td>\n      <td>Caf\u00e9</td>\n      <td>18.565583</td>\n      <td>73.910943</td>\n    </tr>\n    <tr>\n      <th>27</th>\n      <td>Cafe Coffee Day</td>\n      <td>Caf\u00e9</td>\n      <td>18.565018</td>\n      <td>73.911003</td>\n    </tr>\n    <tr>\n      <th>28</th>\n      <td>Mogaa Paratha</td>\n      <td>Indian Restaurant</td>\n      <td>18.565143</td>\n      <td>73.911987</td>\n    </tr>\n  </tbody>\n</table>\n</div>", 
                        "text/plain": "                                    name                       categories  \\\n0                        Perks 'N' Brews                      Coffee Shop   \n1                      Natural Ice Cream                   Ice Cream Shop   \n2               Chopsticks Spice Malabar  Southern / Soul Food Restaurant   \n3                               Falahaar                        Juice Bar   \n4                           Khalsa Dairy                      Cheese Shop   \n5                            PVR Cinemas                        Multiplex   \n6                             Irani Cafe                             Caf\u00e9   \n7                        Cafe Coffee Day                      Coffee Shop   \n8                                 Kaveri                Indian Restaurant   \n9   Incognito - Restaurant, Bar And Cafe              American Restaurant   \n10                            Chopsticks                Indian Restaurant   \n11                          Atmosphere 6                           Lounge   \n12                                Sambar                   Breakfast Spot   \n13                            Where Else                             Caf\u00e9   \n14                Picantos Mexican Grill               Mexican Restaurant   \n15                        Himalaya Momos              Dumpling Restaurant   \n16                        Tea Villa Cafe                             Caf\u00e9   \n17                             Starbucks                      Coffee Shop   \n18                        Largo Pizzeria                      Pizza Place   \n19        Farmaish Restaurant and Lounge                       Restaurant   \n20                          Cream Centre    Vegetarian / Vegan Restaurant   \n21                              Foodhall                     Gourmet Shop   \n22                        Sujata Mastani                     Dessert Shop   \n23                                  Zara                   Clothing Store   \n24                         Crazy Noodles               Chinese Restaurant   \n25                         Punjabi Dhaba                Indian Restaurant   \n26                           Cafe Milano                             Caf\u00e9   \n27                       Cafe Coffee Day                             Caf\u00e9   \n28                         Mogaa Paratha                Indian Restaurant   \n\n          lat        lng  \n0   18.567873  73.914766  \n1   18.567612  73.917748  \n2   18.565245  73.913116  \n3   18.565390  73.918158  \n4   18.565183  73.914468  \n5   18.562506  73.916613  \n6   18.563905  73.915019  \n7   18.566079  73.918249  \n8   18.566443  73.918315  \n9   18.562864  73.916410  \n10  18.565228  73.913179  \n11  18.565483  73.913750  \n12  18.563567  73.917934  \n13  18.565311  73.913977  \n14  18.565423  73.910978  \n15  18.566085  73.910820  \n16  18.562925  73.918076  \n17  18.562580  73.916834  \n18  18.566287  73.919850  \n19  18.567143  73.918985  \n20  18.562635  73.916724  \n21  18.562399  73.916535  \n22  18.565400  73.915169  \n23  18.562420  73.916680  \n24  18.562483  73.916501  \n25  18.565137  73.911484  \n26  18.565583  73.910943  \n27  18.565018  73.911003  \n28  18.565143  73.911987  "
                    }, 
                    "output_type": "execute_result"
                }
            ], 
            "source": "venues = results['response']['groups'][0]['items']\n    \nSGnearby_venues = json_normalize(venues) # flatten JSON\n\n# filter columns\nfiltered_columns = ['venue.name', 'venue.categories', 'venue.location.lat', 'venue.location.lng']\nSGnearby_venues =SGnearby_venues.loc[:, filtered_columns]\n\n# filter the category for each row\nSGnearby_venues['venue.categories'] = SGnearby_venues.apply(get_category_type, axis=1)\n\n# clean columns\nSGnearby_venues.columns = [col.split(\".\")[-1] for col in SGnearby_venues.columns]\n\nSGnearby_venues\n"
        }, 
        {
            "source": "## Map of Pune with venues near residence place - for reference", 
            "cell_type": "markdown", 
            "metadata": {}
        }, 
        {
            "execution_count": 22, 
            "cell_type": "code", 
            "metadata": {}, 
            "outputs": [
                {
                    "execution_count": 22, 
                    "metadata": {}, 
                    "data": {
                        "text/html": "<div style=\"width:100%;\"><div style=\"position:relative;width:100%;height:0;padding-bottom:60%;\"><iframe src=\"data:text/html;charset=utf-8;base64,PCFET0NUWVBFIGh0bWw+CjxoZWFkPiAgICAKICAgIDxtZXRhIGh0dHAtZXF1aXY9ImNvbnRlbnQtdHlwZSIgY29udGVudD0idGV4dC9odG1sOyBjaGFyc2V0PVVURi04IiAvPgogICAgPHNjcmlwdD5MX1BSRUZFUl9DQU5WQVMgPSBmYWxzZTsgTF9OT19UT1VDSCA9IGZhbHNlOyBMX0RJU0FCTEVfM0QgPSBmYWxzZTs8L3NjcmlwdD4KICAgIDxzY3JpcHQgc3JjPSJodHRwczovL2Nkbi5qc2RlbGl2ci5uZXQvbnBtL2xlYWZsZXRAMS4yLjAvZGlzdC9sZWFmbGV0LmpzIj48L3NjcmlwdD4KICAgIDxzY3JpcHQgc3JjPSJodHRwczovL2FqYXguZ29vZ2xlYXBpcy5jb20vYWpheC9saWJzL2pxdWVyeS8xLjExLjEvanF1ZXJ5Lm1pbi5qcyI+PC9zY3JpcHQ+CiAgICA8c2NyaXB0IHNyYz0iaHR0cHM6Ly9tYXhjZG4uYm9vdHN0cmFwY2RuLmNvbS9ib290c3RyYXAvMy4yLjAvanMvYm9vdHN0cmFwLm1pbi5qcyI+PC9zY3JpcHQ+CiAgICA8c2NyaXB0IHNyYz0iaHR0cHM6Ly9jZG5qcy5jbG91ZGZsYXJlLmNvbS9hamF4L2xpYnMvTGVhZmxldC5hd2Vzb21lLW1hcmtlcnMvMi4wLjIvbGVhZmxldC5hd2Vzb21lLW1hcmtlcnMuanMiPjwvc2NyaXB0PgogICAgPGxpbmsgcmVsPSJzdHlsZXNoZWV0IiBocmVmPSJodHRwczovL2Nkbi5qc2RlbGl2ci5uZXQvbnBtL2xlYWZsZXRAMS4yLjAvZGlzdC9sZWFmbGV0LmNzcyIvPgogICAgPGxpbmsgcmVsPSJzdHlsZXNoZWV0IiBocmVmPSJodHRwczovL21heGNkbi5ib290c3RyYXBjZG4uY29tL2Jvb3RzdHJhcC8zLjIuMC9jc3MvYm9vdHN0cmFwLm1pbi5jc3MiLz4KICAgIDxsaW5rIHJlbD0ic3R5bGVzaGVldCIgaHJlZj0iaHR0cHM6Ly9tYXhjZG4uYm9vdHN0cmFwY2RuLmNvbS9ib290c3RyYXAvMy4yLjAvY3NzL2Jvb3RzdHJhcC10aGVtZS5taW4uY3NzIi8+CiAgICA8bGluayByZWw9InN0eWxlc2hlZXQiIGhyZWY9Imh0dHBzOi8vbWF4Y2RuLmJvb3RzdHJhcGNkbi5jb20vZm9udC1hd2Vzb21lLzQuNi4zL2Nzcy9mb250LWF3ZXNvbWUubWluLmNzcyIvPgogICAgPGxpbmsgcmVsPSJzdHlsZXNoZWV0IiBocmVmPSJodHRwczovL2NkbmpzLmNsb3VkZmxhcmUuY29tL2FqYXgvbGlicy9MZWFmbGV0LmF3ZXNvbWUtbWFya2Vycy8yLjAuMi9sZWFmbGV0LmF3ZXNvbWUtbWFya2Vycy5jc3MiLz4KICAgIDxsaW5rIHJlbD0ic3R5bGVzaGVldCIgaHJlZj0iaHR0cHM6Ly9yYXdnaXQuY29tL3B5dGhvbi12aXN1YWxpemF0aW9uL2ZvbGl1bS9tYXN0ZXIvZm9saXVtL3RlbXBsYXRlcy9sZWFmbGV0LmF3ZXNvbWUucm90YXRlLmNzcyIvPgogICAgPHN0eWxlPmh0bWwsIGJvZHkge3dpZHRoOiAxMDAlO2hlaWdodDogMTAwJTttYXJnaW46IDA7cGFkZGluZzogMDt9PC9zdHlsZT4KICAgIDxzdHlsZT4jbWFwIHtwb3NpdGlvbjphYnNvbHV0ZTt0b3A6MDtib3R0b206MDtyaWdodDowO2xlZnQ6MDt9PC9zdHlsZT4KICAgIAogICAgICAgICAgICA8c3R5bGU+ICNtYXBfYzIzMzk4ZWE2NGFhNDE0N2I0ODU2YWFlY2I4Zjg4MDcgewogICAgICAgICAgICAgICAgcG9zaXRpb24gOiByZWxhdGl2ZTsKICAgICAgICAgICAgICAgIHdpZHRoIDogMTAwLjAlOwogICAgICAgICAgICAgICAgaGVpZ2h0OiAxMDAuMCU7CiAgICAgICAgICAgICAgICBsZWZ0OiAwLjAlOwogICAgICAgICAgICAgICAgdG9wOiAwLjAlOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICA8L3N0eWxlPgogICAgICAgIAogICAgPHNjcmlwdCBzcmM9Imh0dHBzOi8vY2RuanMuY2xvdWRmbGFyZS5jb20vYWpheC9saWJzL2xlYWZsZXQtZHZmLzAuMy4wL2xlYWZsZXQtZHZmLm1hcmtlcnMubWluLmpzIj48L3NjcmlwdD4KPC9oZWFkPgo8Ym9keT4gICAgCiAgICAKICAgICAgICAgICAgPGRpdiBjbGFzcz0iZm9saXVtLW1hcCIgaWQ9Im1hcF9jMjMzOThlYTY0YWE0MTQ3YjQ4NTZhYWVjYjhmODgwNyIgPjwvZGl2PgogICAgICAgIAo8L2JvZHk+CjxzY3JpcHQ+ICAgIAogICAgCgogICAgICAgICAgICAKICAgICAgICAgICAgICAgIHZhciBib3VuZHMgPSBudWxsOwogICAgICAgICAgICAKCiAgICAgICAgICAgIHZhciBtYXBfYzIzMzk4ZWE2NGFhNDE0N2I0ODU2YWFlY2I4Zjg4MDcgPSBMLm1hcCgKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdtYXBfYzIzMzk4ZWE2NGFhNDE0N2I0ODU2YWFlY2I4Zjg4MDcnLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge2NlbnRlcjogWzE4LjU2Nzc3NzIsNzMuOTE4MzU1OV0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB6b29tOiAyMCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1heEJvdW5kczogYm91bmRzLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGF5ZXJzOiBbXSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdvcmxkQ29weUp1bXA6IGZhbHNlLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3JzOiBMLkNSUy5FUFNHMzg1NwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgCiAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIHRpbGVfbGF5ZXJfNWRhNTljZmJiZGRlNDRmYmJhYjlkNDZmYjU5Yjg4MzQgPSBMLnRpbGVMYXllcigKICAgICAgICAgICAgICAgICdodHRwczovL3tzfS50aWxlLm9wZW5zdHJlZXRtYXAub3JnL3t6fS97eH0ve3l9LnBuZycsCiAgICAgICAgICAgICAgICB7CiAgImF0dHJpYnV0aW9uIjogbnVsbCwKICAiZGV0ZWN0UmV0aW5hIjogZmFsc2UsCiAgIm1heFpvb20iOiAxOCwKICAibWluWm9vbSI6IDEsCiAgIm5vV3JhcCI6IGZhbHNlLAogICJzdWJkb21haW5zIjogImFiYyIKfQogICAgICAgICAgICAgICAgKS5hZGRUbyhtYXBfYzIzMzk4ZWE2NGFhNDE0N2I0ODU2YWFlY2I4Zjg4MDcpOwogICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciByZWd1bGFyX3BvbHlnb25fbWFya2VyXzJkZDhkZTUwN2E2ZjQyOWU5NzYwMDMxNDU3MDdiNzNlID0gbmV3IEwuUmVndWxhclBvbHlnb25NYXJrZXIoCiAgICAgICAgICAgICAgICBuZXcgTC5MYXRMbmcoMTguNTY3ODczMjIzMDkzNTUzLDczLjkxNDc2NjMzNjA0NTQ1KSwKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICBpY29uIDogbmV3IEwuSWNvbi5EZWZhdWx0KCksCiAgICAgICAgICAgICAgICAgICAgY29sb3I6ICdibHVlJywKICAgICAgICAgICAgICAgICAgICBvcGFjaXR5OiAxLAogICAgICAgICAgICAgICAgICAgIHdlaWdodDogMiwKICAgICAgICAgICAgICAgICAgICBmaWxsQ29sb3I6ICcjMGYwZjBmJywKICAgICAgICAgICAgICAgICAgICBmaWxsT3BhY2l0eTogMC43LAogICAgICAgICAgICAgICAgICAgIG51bWJlck9mU2lkZXM6IDQsCiAgICAgICAgICAgICAgICAgICAgcm90YXRpb246IDAsCiAgICAgICAgICAgICAgICAgICAgcmFkaXVzOiAxMAogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgIC5hZGRUbyhtYXBfYzIzMzk4ZWE2NGFhNDE0N2I0ODU2YWFlY2I4Zjg4MDcpOwogICAgICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgcG9wdXBfMWJlODU5M2Y3MGE1NDM2N2IxNjZjMjE2MGE0OGQyY2UgPSBMLnBvcHVwKHttYXhXaWR0aDogJzMwMCd9KTsKCiAgICAgICAgICAgIAogICAgICAgICAgICAgICAgdmFyIGh0bWxfYmM4NDk4MDM2ZWNkNDU2MTg4ZjU5ZjlkYTI3NTg0NTUgPSAkKCc8ZGl2IGlkPSJodG1sX2JjODQ5ODAzNmVjZDQ1NjE4OGY1OWY5ZGEyNzU4NDU1IiBzdHlsZT0id2lkdGg6IDEwMC4wJTsgaGVpZ2h0OiAxMDAuMCU7Ij5QZXJrcyAmIzM5O04mIzM5OyBCcmV3czwvZGl2PicpWzBdOwogICAgICAgICAgICAgICAgcG9wdXBfMWJlODU5M2Y3MGE1NDM2N2IxNjZjMjE2MGE0OGQyY2Uuc2V0Q29udGVudChodG1sX2JjODQ5ODAzNmVjZDQ1NjE4OGY1OWY5ZGEyNzU4NDU1KTsKICAgICAgICAgICAgCgogICAgICAgICAgICByZWd1bGFyX3BvbHlnb25fbWFya2VyXzJkZDhkZTUwN2E2ZjQyOWU5NzYwMDMxNDU3MDdiNzNlLmJpbmRQb3B1cChwb3B1cF8xYmU4NTkzZjcwYTU0MzY3YjE2NmMyMTYwYTQ4ZDJjZSk7CgogICAgICAgICAgICAKICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgcmVndWxhcl9wb2x5Z29uX21hcmtlcl80OTljZDlkODBjYzc0Yjg1YTdhZGFkMDZkMGUwZmRiNCA9IG5ldyBMLlJlZ3VsYXJQb2x5Z29uTWFya2VyKAogICAgICAgICAgICAgICAgbmV3IEwuTGF0TG5nKDE4LjU2NzYxMjMzMjQzMDU5Miw3My45MTc3NDc1ODcyODQwNCksCiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgaWNvbiA6IG5ldyBMLkljb24uRGVmYXVsdCgpLAogICAgICAgICAgICAgICAgICAgIGNvbG9yOiAnYmx1ZScsCiAgICAgICAgICAgICAgICAgICAgb3BhY2l0eTogMSwKICAgICAgICAgICAgICAgICAgICB3ZWlnaHQ6IDIsCiAgICAgICAgICAgICAgICAgICAgZmlsbENvbG9yOiAnIzBmMGYwZicsCiAgICAgICAgICAgICAgICAgICAgZmlsbE9wYWNpdHk6IDAuNywKICAgICAgICAgICAgICAgICAgICBudW1iZXJPZlNpZGVzOiA0LAogICAgICAgICAgICAgICAgICAgIHJvdGF0aW9uOiAwLAogICAgICAgICAgICAgICAgICAgIHJhZGl1czogMTAKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICAuYWRkVG8obWFwX2MyMzM5OGVhNjRhYTQxNDdiNDg1NmFhZWNiOGY4ODA3KTsKICAgICAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIHBvcHVwXzZkMWNmMjRiMzI3MzQ4MTg4NzNkZmIxYjFiYTFkZWEyID0gTC5wb3B1cCh7bWF4V2lkdGg6ICczMDAnfSk7CgogICAgICAgICAgICAKICAgICAgICAgICAgICAgIHZhciBodG1sX2MwNDU5NDgzODhmODQyMmRiMGI1MTVmNmRhMWU4YzYxID0gJCgnPGRpdiBpZD0iaHRtbF9jMDQ1OTQ4Mzg4Zjg0MjJkYjBiNTE1ZjZkYTFlOGM2MSIgc3R5bGU9IndpZHRoOiAxMDAuMCU7IGhlaWdodDogMTAwLjAlOyI+TmF0dXJhbCBJY2UgQ3JlYW08L2Rpdj4nKVswXTsKICAgICAgICAgICAgICAgIHBvcHVwXzZkMWNmMjRiMzI3MzQ4MTg4NzNkZmIxYjFiYTFkZWEyLnNldENvbnRlbnQoaHRtbF9jMDQ1OTQ4Mzg4Zjg0MjJkYjBiNTE1ZjZkYTFlOGM2MSk7CiAgICAgICAgICAgIAoKICAgICAgICAgICAgcmVndWxhcl9wb2x5Z29uX21hcmtlcl80OTljZDlkODBjYzc0Yjg1YTdhZGFkMDZkMGUwZmRiNC5iaW5kUG9wdXAocG9wdXBfNmQxY2YyNGIzMjczNDgxODg3M2RmYjFiMWJhMWRlYTIpOwoKICAgICAgICAgICAgCiAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIHJlZ3VsYXJfcG9seWdvbl9tYXJrZXJfODhhZDM0MzIwZGExNGE1NGIyODE3ZGIxYWY4ODU5YjAgPSBuZXcgTC5SZWd1bGFyUG9seWdvbk1hcmtlcigKICAgICAgICAgICAgICAgIG5ldyBMLkxhdExuZygxOC41NjUyNDQ1MjU3NTEwODMsNzMuOTEzMTE1NTYxMzAyNDYpLAogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgIGljb24gOiBuZXcgTC5JY29uLkRlZmF1bHQoKSwKICAgICAgICAgICAgICAgICAgICBjb2xvcjogJ2JsdWUnLAogICAgICAgICAgICAgICAgICAgIG9wYWNpdHk6IDEsCiAgICAgICAgICAgICAgICAgICAgd2VpZ2h0OiAyLAogICAgICAgICAgICAgICAgICAgIGZpbGxDb2xvcjogJyMwZjBmMGYnLAogICAgICAgICAgICAgICAgICAgIGZpbGxPcGFjaXR5OiAwLjcsCiAgICAgICAgICAgICAgICAgICAgbnVtYmVyT2ZTaWRlczogNCwKICAgICAgICAgICAgICAgICAgICByb3RhdGlvbjogMCwKICAgICAgICAgICAgICAgICAgICByYWRpdXM6IDEwCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgKQogICAgICAgICAgICAgICAgLmFkZFRvKG1hcF9jMjMzOThlYTY0YWE0MTQ3YjQ4NTZhYWVjYjhmODgwNyk7CiAgICAgICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciBwb3B1cF80MWRlNjEzZjcyYzg0YzQ0YTAyMzE2ZmM2MjcyM2M4NSA9IEwucG9wdXAoe21heFdpZHRoOiAnMzAwJ30pOwoKICAgICAgICAgICAgCiAgICAgICAgICAgICAgICB2YXIgaHRtbF8zNjljZjRjNzNmNDA0OWIwYTk1MTc1ODU1OGUxZTJhMyA9ICQoJzxkaXYgaWQ9Imh0bWxfMzY5Y2Y0YzczZjQwNDliMGE5NTE3NTg1NThlMWUyYTMiIHN0eWxlPSJ3aWR0aDogMTAwLjAlOyBoZWlnaHQ6IDEwMC4wJTsiPkNob3BzdGlja3MgU3BpY2UgTWFsYWJhcjwvZGl2PicpWzBdOwogICAgICAgICAgICAgICAgcG9wdXBfNDFkZTYxM2Y3MmM4NGM0NGEwMjMxNmZjNjI3MjNjODUuc2V0Q29udGVudChodG1sXzM2OWNmNGM3M2Y0MDQ5YjBhOTUxNzU4NTU4ZTFlMmEzKTsKICAgICAgICAgICAgCgogICAgICAgICAgICByZWd1bGFyX3BvbHlnb25fbWFya2VyXzg4YWQzNDMyMGRhMTRhNTRiMjgxN2RiMWFmODg1OWIwLmJpbmRQb3B1cChwb3B1cF80MWRlNjEzZjcyYzg0YzQ0YTAyMzE2ZmM2MjcyM2M4NSk7CgogICAgICAgICAgICAKICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgcmVndWxhcl9wb2x5Z29uX21hcmtlcl85NDE2YjM0ZWU4ZDc0ZjBmYmZkNjFhZTdmODRkYTFjNiA9IG5ldyBMLlJlZ3VsYXJQb2x5Z29uTWFya2VyKAogICAgICAgICAgICAgICAgbmV3IEwuTGF0TG5nKDE4LjU2NTM4OTg4NDU5NzgzNSw3My45MTgxNTgwMTEzODM3OCksCiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgaWNvbiA6IG5ldyBMLkljb24uRGVmYXVsdCgpLAogICAgICAgICAgICAgICAgICAgIGNvbG9yOiAnYmx1ZScsCiAgICAgICAgICAgICAgICAgICAgb3BhY2l0eTogMSwKICAgICAgICAgICAgICAgICAgICB3ZWlnaHQ6IDIsCiAgICAgICAgICAgICAgICAgICAgZmlsbENvbG9yOiAnIzBmMGYwZicsCiAgICAgICAgICAgICAgICAgICAgZmlsbE9wYWNpdHk6IDAuNywKICAgICAgICAgICAgICAgICAgICBudW1iZXJPZlNpZGVzOiA0LAogICAgICAgICAgICAgICAgICAgIHJvdGF0aW9uOiAwLAogICAgICAgICAgICAgICAgICAgIHJhZGl1czogMTAKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICAuYWRkVG8obWFwX2MyMzM5OGVhNjRhYTQxNDdiNDg1NmFhZWNiOGY4ODA3KTsKICAgICAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIHBvcHVwXzBlZWE2M2M4NTk2NDRhZTVhZTljOGU1ODQ3NzA5NGFhID0gTC5wb3B1cCh7bWF4V2lkdGg6ICczMDAnfSk7CgogICAgICAgICAgICAKICAgICAgICAgICAgICAgIHZhciBodG1sX2Y2NDJkMGU4ZDJjODRmYWVhNmU2Y2YxZGZhYjA3ZWM3ID0gJCgnPGRpdiBpZD0iaHRtbF9mNjQyZDBlOGQyYzg0ZmFlYTZlNmNmMWRmYWIwN2VjNyIgc3R5bGU9IndpZHRoOiAxMDAuMCU7IGhlaWdodDogMTAwLjAlOyI+RmFsYWhhYXI8L2Rpdj4nKVswXTsKICAgICAgICAgICAgICAgIHBvcHVwXzBlZWE2M2M4NTk2NDRhZTVhZTljOGU1ODQ3NzA5NGFhLnNldENvbnRlbnQoaHRtbF9mNjQyZDBlOGQyYzg0ZmFlYTZlNmNmMWRmYWIwN2VjNyk7CiAgICAgICAgICAgIAoKICAgICAgICAgICAgcmVndWxhcl9wb2x5Z29uX21hcmtlcl85NDE2YjM0ZWU4ZDc0ZjBmYmZkNjFhZTdmODRkYTFjNi5iaW5kUG9wdXAocG9wdXBfMGVlYTYzYzg1OTY0NGFlNWFlOWM4ZTU4NDc3MDk0YWEpOwoKICAgICAgICAgICAgCiAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIHJlZ3VsYXJfcG9seWdvbl9tYXJrZXJfMjMwZWZlMjYzNDk0NDVhY2JlOWYzZDlmN2FkZDJkZmYgPSBuZXcgTC5SZWd1bGFyUG9seWdvbk1hcmtlcigKICAgICAgICAgICAgICAgIG5ldyBMLkxhdExuZygxOC41NjUxODMyMDc3MDE0Nyw3My45MTQ0Njc4NzI1NDExMiksCiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgaWNvbiA6IG5ldyBMLkljb24uRGVmYXVsdCgpLAogICAgICAgICAgICAgICAgICAgIGNvbG9yOiAnYmx1ZScsCiAgICAgICAgICAgICAgICAgICAgb3BhY2l0eTogMSwKICAgICAgICAgICAgICAgICAgICB3ZWlnaHQ6IDIsCiAgICAgICAgICAgICAgICAgICAgZmlsbENvbG9yOiAnIzBmMGYwZicsCiAgICAgICAgICAgICAgICAgICAgZmlsbE9wYWNpdHk6IDAuNywKICAgICAgICAgICAgICAgICAgICBudW1iZXJPZlNpZGVzOiA0LAogICAgICAgICAgICAgICAgICAgIHJvdGF0aW9uOiAwLAogICAgICAgICAgICAgICAgICAgIHJhZGl1czogMTAKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICAuYWRkVG8obWFwX2MyMzM5OGVhNjRhYTQxNDdiNDg1NmFhZWNiOGY4ODA3KTsKICAgICAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIHBvcHVwXzViNzEyYjZiZjkwYjRhMTViZTAxOThjNzQxZmI4ODE1ID0gTC5wb3B1cCh7bWF4V2lkdGg6ICczMDAnfSk7CgogICAgICAgICAgICAKICAgICAgICAgICAgICAgIHZhciBodG1sX2JiZDE1NmNkZjgzMTQ1MTFhOWM5NjBkMGVlZjhiZDZjID0gJCgnPGRpdiBpZD0iaHRtbF9iYmQxNTZjZGY4MzE0NTExYTljOTYwZDBlZWY4YmQ2YyIgc3R5bGU9IndpZHRoOiAxMDAuMCU7IGhlaWdodDogMTAwLjAlOyI+S2hhbHNhIERhaXJ5PC9kaXY+JylbMF07CiAgICAgICAgICAgICAgICBwb3B1cF81YjcxMmI2YmY5MGI0YTE1YmUwMTk4Yzc0MWZiODgxNS5zZXRDb250ZW50KGh0bWxfYmJkMTU2Y2RmODMxNDUxMWE5Yzk2MGQwZWVmOGJkNmMpOwogICAgICAgICAgICAKCiAgICAgICAgICAgIHJlZ3VsYXJfcG9seWdvbl9tYXJrZXJfMjMwZWZlMjYzNDk0NDVhY2JlOWYzZDlmN2FkZDJkZmYuYmluZFBvcHVwKHBvcHVwXzViNzEyYjZiZjkwYjRhMTViZTAxOThjNzQxZmI4ODE1KTsKCiAgICAgICAgICAgIAogICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciByZWd1bGFyX3BvbHlnb25fbWFya2VyX2YyZWU3ODRmNDNiOTRmYmZiNzcwOGYwMDFkODMyOTlmID0gbmV3IEwuUmVndWxhclBvbHlnb25NYXJrZXIoCiAgICAgICAgICAgICAgICBuZXcgTC5MYXRMbmcoMTguNTYyNTA1NjI1MTM1OTk4LDczLjkxNjYxMjYzMzY3MjM5KSwKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICBpY29uIDogbmV3IEwuSWNvbi5EZWZhdWx0KCksCiAgICAgICAgICAgICAgICAgICAgY29sb3I6ICdibHVlJywKICAgICAgICAgICAgICAgICAgICBvcGFjaXR5OiAxLAogICAgICAgICAgICAgICAgICAgIHdlaWdodDogMiwKICAgICAgICAgICAgICAgICAgICBmaWxsQ29sb3I6ICcjMGYwZjBmJywKICAgICAgICAgICAgICAgICAgICBmaWxsT3BhY2l0eTogMC43LAogICAgICAgICAgICAgICAgICAgIG51bWJlck9mU2lkZXM6IDQsCiAgICAgICAgICAgICAgICAgICAgcm90YXRpb246IDAsCiAgICAgICAgICAgICAgICAgICAgcmFkaXVzOiAxMAogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgIC5hZGRUbyhtYXBfYzIzMzk4ZWE2NGFhNDE0N2I0ODU2YWFlY2I4Zjg4MDcpOwogICAgICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgcG9wdXBfNWQ2OTQ4NjVjNTgxNGRhNmIzYzg2N2ZiNGU4ZDM2ZmYgPSBMLnBvcHVwKHttYXhXaWR0aDogJzMwMCd9KTsKCiAgICAgICAgICAgIAogICAgICAgICAgICAgICAgdmFyIGh0bWxfM2IyOGU3NGQ1OWFlNDIxODhhZTY2NjI5YzYzYWZjYzIgPSAkKCc8ZGl2IGlkPSJodG1sXzNiMjhlNzRkNTlhZTQyMTg4YWU2NjYyOWM2M2FmY2MyIiBzdHlsZT0id2lkdGg6IDEwMC4wJTsgaGVpZ2h0OiAxMDAuMCU7Ij5QVlIgQ2luZW1hczwvZGl2PicpWzBdOwogICAgICAgICAgICAgICAgcG9wdXBfNWQ2OTQ4NjVjNTgxNGRhNmIzYzg2N2ZiNGU4ZDM2ZmYuc2V0Q29udGVudChodG1sXzNiMjhlNzRkNTlhZTQyMTg4YWU2NjYyOWM2M2FmY2MyKTsKICAgICAgICAgICAgCgogICAgICAgICAgICByZWd1bGFyX3BvbHlnb25fbWFya2VyX2YyZWU3ODRmNDNiOTRmYmZiNzcwOGYwMDFkODMyOTlmLmJpbmRQb3B1cChwb3B1cF81ZDY5NDg2NWM1ODE0ZGE2YjNjODY3ZmI0ZThkMzZmZik7CgogICAgICAgICAgICAKICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgcmVndWxhcl9wb2x5Z29uX21hcmtlcl82Y2IyMTU5MjQ2Zjk0OWE2OTBkNWY0MjIwYmRiMDk4MyA9IG5ldyBMLlJlZ3VsYXJQb2x5Z29uTWFya2VyKAogICAgICAgICAgICAgICAgbmV3IEwuTGF0TG5nKDE4LjU2MzkwNDU5MzYzNDM2LDczLjkxNTAxOTE4MTEzMyksCiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgaWNvbiA6IG5ldyBMLkljb24uRGVmYXVsdCgpLAogICAgICAgICAgICAgICAgICAgIGNvbG9yOiAnYmx1ZScsCiAgICAgICAgICAgICAgICAgICAgb3BhY2l0eTogMSwKICAgICAgICAgICAgICAgICAgICB3ZWlnaHQ6IDIsCiAgICAgICAgICAgICAgICAgICAgZmlsbENvbG9yOiAnIzBmMGYwZicsCiAgICAgICAgICAgICAgICAgICAgZmlsbE9wYWNpdHk6IDAuNywKICAgICAgICAgICAgICAgICAgICBudW1iZXJPZlNpZGVzOiA0LAogICAgICAgICAgICAgICAgICAgIHJvdGF0aW9uOiAwLAogICAgICAgICAgICAgICAgICAgIHJhZGl1czogMTAKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICAuYWRkVG8obWFwX2MyMzM5OGVhNjRhYTQxNDdiNDg1NmFhZWNiOGY4ODA3KTsKICAgICAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIHBvcHVwX2NlMTZhZWQ5Njg4YjRiMDU4OWQ4ZGRjMjY2NWY5MGZmID0gTC5wb3B1cCh7bWF4V2lkdGg6ICczMDAnfSk7CgogICAgICAgICAgICAKICAgICAgICAgICAgICAgIHZhciBodG1sXzNmZGFjNDA2ZjQ5ODRmODY5YjA5MmRiNzdkYzYyNTRmID0gJCgnPGRpdiBpZD0iaHRtbF8zZmRhYzQwNmY0OTg0Zjg2OWIwOTJkYjc3ZGM2MjU0ZiIgc3R5bGU9IndpZHRoOiAxMDAuMCU7IGhlaWdodDogMTAwLjAlOyI+SXJhbmkgQ2FmZTwvZGl2PicpWzBdOwogICAgICAgICAgICAgICAgcG9wdXBfY2UxNmFlZDk2ODhiNGIwNTg5ZDhkZGMyNjY1ZjkwZmYuc2V0Q29udGVudChodG1sXzNmZGFjNDA2ZjQ5ODRmODY5YjA5MmRiNzdkYzYyNTRmKTsKICAgICAgICAgICAgCgogICAgICAgICAgICByZWd1bGFyX3BvbHlnb25fbWFya2VyXzZjYjIxNTkyNDZmOTQ5YTY5MGQ1ZjQyMjBiZGIwOTgzLmJpbmRQb3B1cChwb3B1cF9jZTE2YWVkOTY4OGI0YjA1ODlkOGRkYzI2NjVmOTBmZik7CgogICAgICAgICAgICAKICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgcmVndWxhcl9wb2x5Z29uX21hcmtlcl80NTA2ZTRmZWU4Y2E0ZGI4ODY3MGI1NmFhOTIxN2ZiZSA9IG5ldyBMLlJlZ3VsYXJQb2x5Z29uTWFya2VyKAogICAgICAgICAgICAgICAgbmV3IEwuTGF0TG5nKDE4LjU2NjA3ODY2ODQxOTkzNCw3My45MTgyNDg3MjM3MDYzNyksCiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgaWNvbiA6IG5ldyBMLkljb24uRGVmYXVsdCgpLAogICAgICAgICAgICAgICAgICAgIGNvbG9yOiAnYmx1ZScsCiAgICAgICAgICAgICAgICAgICAgb3BhY2l0eTogMSwKICAgICAgICAgICAgICAgICAgICB3ZWlnaHQ6IDIsCiAgICAgICAgICAgICAgICAgICAgZmlsbENvbG9yOiAnIzBmMGYwZicsCiAgICAgICAgICAgICAgICAgICAgZmlsbE9wYWNpdHk6IDAuNywKICAgICAgICAgICAgICAgICAgICBudW1iZXJPZlNpZGVzOiA0LAogICAgICAgICAgICAgICAgICAgIHJvdGF0aW9uOiAwLAogICAgICAgICAgICAgICAgICAgIHJhZGl1czogMTAKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICAuYWRkVG8obWFwX2MyMzM5OGVhNjRhYTQxNDdiNDg1NmFhZWNiOGY4ODA3KTsKICAgICAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIHBvcHVwX2E1YTM2OWM1MTAwMDQ3YzY4OWU3MGQ5MGQxNDRkMzk5ID0gTC5wb3B1cCh7bWF4V2lkdGg6ICczMDAnfSk7CgogICAgICAgICAgICAKICAgICAgICAgICAgICAgIHZhciBodG1sX2YzM2Y0NDI5NGEyYjRmZDI5ZGM2NTY3YmRhMTNmZWVhID0gJCgnPGRpdiBpZD0iaHRtbF9mMzNmNDQyOTRhMmI0ZmQyOWRjNjU2N2JkYTEzZmVlYSIgc3R5bGU9IndpZHRoOiAxMDAuMCU7IGhlaWdodDogMTAwLjAlOyI+Q2FmZSBDb2ZmZWUgRGF5PC9kaXY+JylbMF07CiAgICAgICAgICAgICAgICBwb3B1cF9hNWEzNjljNTEwMDA0N2M2ODllNzBkOTBkMTQ0ZDM5OS5zZXRDb250ZW50KGh0bWxfZjMzZjQ0Mjk0YTJiNGZkMjlkYzY1NjdiZGExM2ZlZWEpOwogICAgICAgICAgICAKCiAgICAgICAgICAgIHJlZ3VsYXJfcG9seWdvbl9tYXJrZXJfNDUwNmU0ZmVlOGNhNGRiODg2NzBiNTZhYTkyMTdmYmUuYmluZFBvcHVwKHBvcHVwX2E1YTM2OWM1MTAwMDQ3YzY4OWU3MGQ5MGQxNDRkMzk5KTsKCiAgICAgICAgICAgIAogICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciByZWd1bGFyX3BvbHlnb25fbWFya2VyXzIzYjE2NjIyMDAzODQ0OGRhMjBkNDE0ODI2YWQyM2VhID0gbmV3IEwuUmVndWxhclBvbHlnb25NYXJrZXIoCiAgICAgICAgICAgICAgICBuZXcgTC5MYXRMbmcoMTguNTY2NDQzMzE5NzYyNTYzLDczLjkxODMxNDc4NDI3NjY2KSwKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICBpY29uIDogbmV3IEwuSWNvbi5EZWZhdWx0KCksCiAgICAgICAgICAgICAgICAgICAgY29sb3I6ICdibHVlJywKICAgICAgICAgICAgICAgICAgICBvcGFjaXR5OiAxLAogICAgICAgICAgICAgICAgICAgIHdlaWdodDogMiwKICAgICAgICAgICAgICAgICAgICBmaWxsQ29sb3I6ICcjMGYwZjBmJywKICAgICAgICAgICAgICAgICAgICBmaWxsT3BhY2l0eTogMC43LAogICAgICAgICAgICAgICAgICAgIG51bWJlck9mU2lkZXM6IDQsCiAgICAgICAgICAgICAgICAgICAgcm90YXRpb246IDAsCiAgICAgICAgICAgICAgICAgICAgcmFkaXVzOiAxMAogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgIC5hZGRUbyhtYXBfYzIzMzk4ZWE2NGFhNDE0N2I0ODU2YWFlY2I4Zjg4MDcpOwogICAgICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgcG9wdXBfZTdhNmE2YzU4NGY0NGY0MThkMDhmZTg3YmU2MjQ3NTcgPSBMLnBvcHVwKHttYXhXaWR0aDogJzMwMCd9KTsKCiAgICAgICAgICAgIAogICAgICAgICAgICAgICAgdmFyIGh0bWxfNmU0YmNiZGQ3MzFjNDdlYjllYjYzZjUzMmFhOTNjZjkgPSAkKCc8ZGl2IGlkPSJodG1sXzZlNGJjYmRkNzMxYzQ3ZWI5ZWI2M2Y1MzJhYTkzY2Y5IiBzdHlsZT0id2lkdGg6IDEwMC4wJTsgaGVpZ2h0OiAxMDAuMCU7Ij5LYXZlcmk8L2Rpdj4nKVswXTsKICAgICAgICAgICAgICAgIHBvcHVwX2U3YTZhNmM1ODRmNDRmNDE4ZDA4ZmU4N2JlNjI0NzU3LnNldENvbnRlbnQoaHRtbF82ZTRiY2JkZDczMWM0N2ViOWViNjNmNTMyYWE5M2NmOSk7CiAgICAgICAgICAgIAoKICAgICAgICAgICAgcmVndWxhcl9wb2x5Z29uX21hcmtlcl8yM2IxNjYyMjAwMzg0NDhkYTIwZDQxNDgyNmFkMjNlYS5iaW5kUG9wdXAocG9wdXBfZTdhNmE2YzU4NGY0NGY0MThkMDhmZTg3YmU2MjQ3NTcpOwoKICAgICAgICAgICAgCiAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIHJlZ3VsYXJfcG9seWdvbl9tYXJrZXJfOWU5OGVkNzc4YzUyNDhhNTk0Njk0YTE5ZTNkZjJjYTIgPSBuZXcgTC5SZWd1bGFyUG9seWdvbk1hcmtlcigKICAgICAgICAgICAgICAgIG5ldyBMLkxhdExuZygxOC41NjI4NjQsNzMuOTE2NDEpLAogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgIGljb24gOiBuZXcgTC5JY29uLkRlZmF1bHQoKSwKICAgICAgICAgICAgICAgICAgICBjb2xvcjogJ2JsdWUnLAogICAgICAgICAgICAgICAgICAgIG9wYWNpdHk6IDEsCiAgICAgICAgICAgICAgICAgICAgd2VpZ2h0OiAyLAogICAgICAgICAgICAgICAgICAgIGZpbGxDb2xvcjogJyMwZjBmMGYnLAogICAgICAgICAgICAgICAgICAgIGZpbGxPcGFjaXR5OiAwLjcsCiAgICAgICAgICAgICAgICAgICAgbnVtYmVyT2ZTaWRlczogNCwKICAgICAgICAgICAgICAgICAgICByb3RhdGlvbjogMCwKICAgICAgICAgICAgICAgICAgICByYWRpdXM6IDEwCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgKQogICAgICAgICAgICAgICAgLmFkZFRvKG1hcF9jMjMzOThlYTY0YWE0MTQ3YjQ4NTZhYWVjYjhmODgwNyk7CiAgICAgICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciBwb3B1cF9kNmZkMWU3NTM3OWY0N2U5Yjg5YzdkYTI2MDZmYzQyZSA9IEwucG9wdXAoe21heFdpZHRoOiAnMzAwJ30pOwoKICAgICAgICAgICAgCiAgICAgICAgICAgICAgICB2YXIgaHRtbF8xMzE3MzBhM2ZhZmQ0ZTkwYTdjYjRmOGNjYjBlOTMyYiA9ICQoJzxkaXYgaWQ9Imh0bWxfMTMxNzMwYTNmYWZkNGU5MGE3Y2I0ZjhjY2IwZTkzMmIiIHN0eWxlPSJ3aWR0aDogMTAwLjAlOyBoZWlnaHQ6IDEwMC4wJTsiPkluY29nbml0byAtIFJlc3RhdXJhbnQsIEJhciBBbmQgQ2FmZTwvZGl2PicpWzBdOwogICAgICAgICAgICAgICAgcG9wdXBfZDZmZDFlNzUzNzlmNDdlOWI4OWM3ZGEyNjA2ZmM0MmUuc2V0Q29udGVudChodG1sXzEzMTczMGEzZmFmZDRlOTBhN2NiNGY4Y2NiMGU5MzJiKTsKICAgICAgICAgICAgCgogICAgICAgICAgICByZWd1bGFyX3BvbHlnb25fbWFya2VyXzllOThlZDc3OGM1MjQ4YTU5NDY5NGExOWUzZGYyY2EyLmJpbmRQb3B1cChwb3B1cF9kNmZkMWU3NTM3OWY0N2U5Yjg5YzdkYTI2MDZmYzQyZSk7CgogICAgICAgICAgICAKICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgcmVndWxhcl9wb2x5Z29uX21hcmtlcl8zZTdkODM2OTQwYTA0ZmVkYWIxNTQ4YzJmNjBjM2ZlNCA9IG5ldyBMLlJlZ3VsYXJQb2x5Z29uTWFya2VyKAogICAgICAgICAgICAgICAgbmV3IEwuTGF0TG5nKDE4LjU2NTIyNzg4MTk3MDkyLDczLjkxMzE3OTQzNDYzMjM3KSwKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICBpY29uIDogbmV3IEwuSWNvbi5EZWZhdWx0KCksCiAgICAgICAgICAgICAgICAgICAgY29sb3I6ICdibHVlJywKICAgICAgICAgICAgICAgICAgICBvcGFjaXR5OiAxLAogICAgICAgICAgICAgICAgICAgIHdlaWdodDogMiwKICAgICAgICAgICAgICAgICAgICBmaWxsQ29sb3I6ICcjMGYwZjBmJywKICAgICAgICAgICAgICAgICAgICBmaWxsT3BhY2l0eTogMC43LAogICAgICAgICAgICAgICAgICAgIG51bWJlck9mU2lkZXM6IDQsCiAgICAgICAgICAgICAgICAgICAgcm90YXRpb246IDAsCiAgICAgICAgICAgICAgICAgICAgcmFkaXVzOiAxMAogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgIC5hZGRUbyhtYXBfYzIzMzk4ZWE2NGFhNDE0N2I0ODU2YWFlY2I4Zjg4MDcpOwogICAgICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgcG9wdXBfNTc5NTkwYzljNjRlNGEyMWIxOTYwMjhlZmU5Y2E4NzYgPSBMLnBvcHVwKHttYXhXaWR0aDogJzMwMCd9KTsKCiAgICAgICAgICAgIAogICAgICAgICAgICAgICAgdmFyIGh0bWxfNzA4NDFiMWM1NzcwNDcwZTgyYjE3OWEyYTBhNWUwNzggPSAkKCc8ZGl2IGlkPSJodG1sXzcwODQxYjFjNTc3MDQ3MGU4MmIxNzlhMmEwYTVlMDc4IiBzdHlsZT0id2lkdGg6IDEwMC4wJTsgaGVpZ2h0OiAxMDAuMCU7Ij5DaG9wc3RpY2tzPC9kaXY+JylbMF07CiAgICAgICAgICAgICAgICBwb3B1cF81Nzk1OTBjOWM2NGU0YTIxYjE5NjAyOGVmZTljYTg3Ni5zZXRDb250ZW50KGh0bWxfNzA4NDFiMWM1NzcwNDcwZTgyYjE3OWEyYTBhNWUwNzgpOwogICAgICAgICAgICAKCiAgICAgICAgICAgIHJlZ3VsYXJfcG9seWdvbl9tYXJrZXJfM2U3ZDgzNjk0MGEwNGZlZGFiMTU0OGMyZjYwYzNmZTQuYmluZFBvcHVwKHBvcHVwXzU3OTU5MGM5YzY0ZTRhMjFiMTk2MDI4ZWZlOWNhODc2KTsKCiAgICAgICAgICAgIAogICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciByZWd1bGFyX3BvbHlnb25fbWFya2VyX2UxM2Y2ODBhYmFlZTQ3ZWJhM2Y3ODQ2NjdjY2FhYzU2ID0gbmV3IEwuUmVndWxhclBvbHlnb25NYXJrZXIoCiAgICAgICAgICAgICAgICBuZXcgTC5MYXRMbmcoMTguNTY1NDgzMzg1MTkwNjksNzMuOTEzNzQ5NjQ2ODk1OTIpLAogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgIGljb24gOiBuZXcgTC5JY29uLkRlZmF1bHQoKSwKICAgICAgICAgICAgICAgICAgICBjb2xvcjogJ2JsdWUnLAogICAgICAgICAgICAgICAgICAgIG9wYWNpdHk6IDEsCiAgICAgICAgICAgICAgICAgICAgd2VpZ2h0OiAyLAogICAgICAgICAgICAgICAgICAgIGZpbGxDb2xvcjogJyMwZjBmMGYnLAogICAgICAgICAgICAgICAgICAgIGZpbGxPcGFjaXR5OiAwLjcsCiAgICAgICAgICAgICAgICAgICAgbnVtYmVyT2ZTaWRlczogNCwKICAgICAgICAgICAgICAgICAgICByb3RhdGlvbjogMCwKICAgICAgICAgICAgICAgICAgICByYWRpdXM6IDEwCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgKQogICAgICAgICAgICAgICAgLmFkZFRvKG1hcF9jMjMzOThlYTY0YWE0MTQ3YjQ4NTZhYWVjYjhmODgwNyk7CiAgICAgICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciBwb3B1cF85MDViY2I1YTVhZWQ0YjE1OTFhOTA0Yjg3YWIyZGU0NCA9IEwucG9wdXAoe21heFdpZHRoOiAnMzAwJ30pOwoKICAgICAgICAgICAgCiAgICAgICAgICAgICAgICB2YXIgaHRtbF8yYzg5N2ZjMzRhY2I0YWU2YTNkMzg3NGNiMWRmNmExNCA9ICQoJzxkaXYgaWQ9Imh0bWxfMmM4OTdmYzM0YWNiNGFlNmEzZDM4NzRjYjFkZjZhMTQiIHN0eWxlPSJ3aWR0aDogMTAwLjAlOyBoZWlnaHQ6IDEwMC4wJTsiPkF0bW9zcGhlcmUgNjwvZGl2PicpWzBdOwogICAgICAgICAgICAgICAgcG9wdXBfOTA1YmNiNWE1YWVkNGIxNTkxYTkwNGI4N2FiMmRlNDQuc2V0Q29udGVudChodG1sXzJjODk3ZmMzNGFjYjRhZTZhM2QzODc0Y2IxZGY2YTE0KTsKICAgICAgICAgICAgCgogICAgICAgICAgICByZWd1bGFyX3BvbHlnb25fbWFya2VyX2UxM2Y2ODBhYmFlZTQ3ZWJhM2Y3ODQ2NjdjY2FhYzU2LmJpbmRQb3B1cChwb3B1cF85MDViY2I1YTVhZWQ0YjE1OTFhOTA0Yjg3YWIyZGU0NCk7CgogICAgICAgICAgICAKICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgcmVndWxhcl9wb2x5Z29uX21hcmtlcl9mODUyOGZhZjhlMjg0YmY0OWNkMzI3NzQ0MTJjNjY0NSA9IG5ldyBMLlJlZ3VsYXJQb2x5Z29uTWFya2VyKAogICAgICAgICAgICAgICAgbmV3IEwuTGF0TG5nKDE4LjU2MzU2NzQ1NzgyNjQ4Nyw3My45MTc5MzQxMjUyNTcwNiksCiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgaWNvbiA6IG5ldyBMLkljb24uRGVmYXVsdCgpLAogICAgICAgICAgICAgICAgICAgIGNvbG9yOiAnYmx1ZScsCiAgICAgICAgICAgICAgICAgICAgb3BhY2l0eTogMSwKICAgICAgICAgICAgICAgICAgICB3ZWlnaHQ6IDIsCiAgICAgICAgICAgICAgICAgICAgZmlsbENvbG9yOiAnIzBmMGYwZicsCiAgICAgICAgICAgICAgICAgICAgZmlsbE9wYWNpdHk6IDAuNywKICAgICAgICAgICAgICAgICAgICBudW1iZXJPZlNpZGVzOiA0LAogICAgICAgICAgICAgICAgICAgIHJvdGF0aW9uOiAwLAogICAgICAgICAgICAgICAgICAgIHJhZGl1czogMTAKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICAuYWRkVG8obWFwX2MyMzM5OGVhNjRhYTQxNDdiNDg1NmFhZWNiOGY4ODA3KTsKICAgICAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIHBvcHVwXzQ1NDc2MjhiNDdlNDQzOGE5YTI1ZjY3NmNmNDg1ZTQxID0gTC5wb3B1cCh7bWF4V2lkdGg6ICczMDAnfSk7CgogICAgICAgICAgICAKICAgICAgICAgICAgICAgIHZhciBodG1sX2I4MmE2NWI4OWQwNjRmMTM5MDYyN2M5ZTczMmFlMDY4ID0gJCgnPGRpdiBpZD0iaHRtbF9iODJhNjViODlkMDY0ZjEzOTA2MjdjOWU3MzJhZTA2OCIgc3R5bGU9IndpZHRoOiAxMDAuMCU7IGhlaWdodDogMTAwLjAlOyI+U2FtYmFyPC9kaXY+JylbMF07CiAgICAgICAgICAgICAgICBwb3B1cF80NTQ3NjI4YjQ3ZTQ0MzhhOWEyNWY2NzZjZjQ4NWU0MS5zZXRDb250ZW50KGh0bWxfYjgyYTY1Yjg5ZDA2NGYxMzkwNjI3YzllNzMyYWUwNjgpOwogICAgICAgICAgICAKCiAgICAgICAgICAgIHJlZ3VsYXJfcG9seWdvbl9tYXJrZXJfZjg1MjhmYWY4ZTI4NGJmNDljZDMyNzc0NDEyYzY2NDUuYmluZFBvcHVwKHBvcHVwXzQ1NDc2MjhiNDdlNDQzOGE5YTI1ZjY3NmNmNDg1ZTQxKTsKCiAgICAgICAgICAgIAogICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciByZWd1bGFyX3BvbHlnb25fbWFya2VyXzJjOWNjZDJkNmZiZTQ2ZGZhNjljNzY1Mjc5Yzg3ZWQyID0gbmV3IEwuUmVndWxhclBvbHlnb25NYXJrZXIoCiAgICAgICAgICAgICAgICBuZXcgTC5MYXRMbmcoMTguNTY1MzEwOTUxNzMwNjYyLDczLjkxMzk3NjkxODIxMTE4KSwKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICBpY29uIDogbmV3IEwuSWNvbi5EZWZhdWx0KCksCiAgICAgICAgICAgICAgICAgICAgY29sb3I6ICdibHVlJywKICAgICAgICAgICAgICAgICAgICBvcGFjaXR5OiAxLAogICAgICAgICAgICAgICAgICAgIHdlaWdodDogMiwKICAgICAgICAgICAgICAgICAgICBmaWxsQ29sb3I6ICcjMGYwZjBmJywKICAgICAgICAgICAgICAgICAgICBmaWxsT3BhY2l0eTogMC43LAogICAgICAgICAgICAgICAgICAgIG51bWJlck9mU2lkZXM6IDQsCiAgICAgICAgICAgICAgICAgICAgcm90YXRpb246IDAsCiAgICAgICAgICAgICAgICAgICAgcmFkaXVzOiAxMAogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgIC5hZGRUbyhtYXBfYzIzMzk4ZWE2NGFhNDE0N2I0ODU2YWFlY2I4Zjg4MDcpOwogICAgICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgcG9wdXBfNGNhMjM5NjVjNDRiNDZiNGE3NmUxYWIzOThkNTM0ODYgPSBMLnBvcHVwKHttYXhXaWR0aDogJzMwMCd9KTsKCiAgICAgICAgICAgIAogICAgICAgICAgICAgICAgdmFyIGh0bWxfZmVlZmU5MzNkZjQ0NGI5MGJlNTc0MTFjZWYyNTZhNWMgPSAkKCc8ZGl2IGlkPSJodG1sX2ZlZWZlOTMzZGY0NDRiOTBiZTU3NDExY2VmMjU2YTVjIiBzdHlsZT0id2lkdGg6IDEwMC4wJTsgaGVpZ2h0OiAxMDAuMCU7Ij5XaGVyZSBFbHNlPC9kaXY+JylbMF07CiAgICAgICAgICAgICAgICBwb3B1cF80Y2EyMzk2NWM0NGI0NmI0YTc2ZTFhYjM5OGQ1MzQ4Ni5zZXRDb250ZW50KGh0bWxfZmVlZmU5MzNkZjQ0NGI5MGJlNTc0MTFjZWYyNTZhNWMpOwogICAgICAgICAgICAKCiAgICAgICAgICAgIHJlZ3VsYXJfcG9seWdvbl9tYXJrZXJfMmM5Y2NkMmQ2ZmJlNDZkZmE2OWM3NjUyNzljODdlZDIuYmluZFBvcHVwKHBvcHVwXzRjYTIzOTY1YzQ0YjQ2YjRhNzZlMWFiMzk4ZDUzNDg2KTsKCiAgICAgICAgICAgIAogICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciByZWd1bGFyX3BvbHlnb25fbWFya2VyX2UxOWI2MGEwNTFjOTQyNDc5Y2M3OTZlOGY4NTVjYzM0ID0gbmV3IEwuUmVndWxhclBvbHlnb25NYXJrZXIoCiAgICAgICAgICAgICAgICBuZXcgTC5MYXRMbmcoMTguNTY1NDIyNzk5NDQyODcsNzMuOTEwOTc3NTYyMzkxMjgpLAogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgIGljb24gOiBuZXcgTC5JY29uLkRlZmF1bHQoKSwKICAgICAgICAgICAgICAgICAgICBjb2xvcjogJ2JsdWUnLAogICAgICAgICAgICAgICAgICAgIG9wYWNpdHk6IDEsCiAgICAgICAgICAgICAgICAgICAgd2VpZ2h0OiAyLAogICAgICAgICAgICAgICAgICAgIGZpbGxDb2xvcjogJyMwZjBmMGYnLAogICAgICAgICAgICAgICAgICAgIGZpbGxPcGFjaXR5OiAwLjcsCiAgICAgICAgICAgICAgICAgICAgbnVtYmVyT2ZTaWRlczogNCwKICAgICAgICAgICAgICAgICAgICByb3RhdGlvbjogMCwKICAgICAgICAgICAgICAgICAgICByYWRpdXM6IDEwCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgKQogICAgICAgICAgICAgICAgLmFkZFRvKG1hcF9jMjMzOThlYTY0YWE0MTQ3YjQ4NTZhYWVjYjhmODgwNyk7CiAgICAgICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciBwb3B1cF9kMWVhOGZmYzVjOGM0NWI4YjI2OGQzNmNhMzY4ODVlYSA9IEwucG9wdXAoe21heFdpZHRoOiAnMzAwJ30pOwoKICAgICAgICAgICAgCiAgICAgICAgICAgICAgICB2YXIgaHRtbF9iOTUyNzY3YmY3NmQ0YzkyOTUzMjc5N2IzNDdmNDI4NyA9ICQoJzxkaXYgaWQ9Imh0bWxfYjk1Mjc2N2JmNzZkNGM5Mjk1MzI3OTdiMzQ3ZjQyODciIHN0eWxlPSJ3aWR0aDogMTAwLjAlOyBoZWlnaHQ6IDEwMC4wJTsiPlBpY2FudG9zIE1leGljYW4gR3JpbGw8L2Rpdj4nKVswXTsKICAgICAgICAgICAgICAgIHBvcHVwX2QxZWE4ZmZjNWM4YzQ1YjhiMjY4ZDM2Y2EzNjg4NWVhLnNldENvbnRlbnQoaHRtbF9iOTUyNzY3YmY3NmQ0YzkyOTUzMjc5N2IzNDdmNDI4Nyk7CiAgICAgICAgICAgIAoKICAgICAgICAgICAgcmVndWxhcl9wb2x5Z29uX21hcmtlcl9lMTliNjBhMDUxYzk0MjQ3OWNjNzk2ZThmODU1Y2MzNC5iaW5kUG9wdXAocG9wdXBfZDFlYThmZmM1YzhjNDViOGIyNjhkMzZjYTM2ODg1ZWEpOwoKICAgICAgICAgICAgCiAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIHJlZ3VsYXJfcG9seWdvbl9tYXJrZXJfYzAyMGU5M2IwYTkzNGI2NzhhOTRlZTg5MzJkMDBjNDAgPSBuZXcgTC5SZWd1bGFyUG9seWdvbk1hcmtlcigKICAgICAgICAgICAgICAgIG5ldyBMLkxhdExuZygxOC41NjYwODQ1MTI5NDM2NDcsNzMuOTEwODIwMzE0OTMzOTEpLAogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgIGljb24gOiBuZXcgTC5JY29uLkRlZmF1bHQoKSwKICAgICAgICAgICAgICAgICAgICBjb2xvcjogJ2JsdWUnLAogICAgICAgICAgICAgICAgICAgIG9wYWNpdHk6IDEsCiAgICAgICAgICAgICAgICAgICAgd2VpZ2h0OiAyLAogICAgICAgICAgICAgICAgICAgIGZpbGxDb2xvcjogJyMwZjBmMGYnLAogICAgICAgICAgICAgICAgICAgIGZpbGxPcGFjaXR5OiAwLjcsCiAgICAgICAgICAgICAgICAgICAgbnVtYmVyT2ZTaWRlczogNCwKICAgICAgICAgICAgICAgICAgICByb3RhdGlvbjogMCwKICAgICAgICAgICAgICAgICAgICByYWRpdXM6IDEwCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgKQogICAgICAgICAgICAgICAgLmFkZFRvKG1hcF9jMjMzOThlYTY0YWE0MTQ3YjQ4NTZhYWVjYjhmODgwNyk7CiAgICAgICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciBwb3B1cF9kZjRlY2I2Mjc4YzA0OTQ5ODEzYjU0OGU5MDA1ZTk5NiA9IEwucG9wdXAoe21heFdpZHRoOiAnMzAwJ30pOwoKICAgICAgICAgICAgCiAgICAgICAgICAgICAgICB2YXIgaHRtbF8yMDQwY2FlN2Q4ZDM0ZTEzYTc2MmFjNGFhNGE3OWQ1ZiA9ICQoJzxkaXYgaWQ9Imh0bWxfMjA0MGNhZTdkOGQzNGUxM2E3NjJhYzRhYTRhNzlkNWYiIHN0eWxlPSJ3aWR0aDogMTAwLjAlOyBoZWlnaHQ6IDEwMC4wJTsiPkhpbWFsYXlhIE1vbW9zPC9kaXY+JylbMF07CiAgICAgICAgICAgICAgICBwb3B1cF9kZjRlY2I2Mjc4YzA0OTQ5ODEzYjU0OGU5MDA1ZTk5Ni5zZXRDb250ZW50KGh0bWxfMjA0MGNhZTdkOGQzNGUxM2E3NjJhYzRhYTRhNzlkNWYpOwogICAgICAgICAgICAKCiAgICAgICAgICAgIHJlZ3VsYXJfcG9seWdvbl9tYXJrZXJfYzAyMGU5M2IwYTkzNGI2NzhhOTRlZTg5MzJkMDBjNDAuYmluZFBvcHVwKHBvcHVwX2RmNGVjYjYyNzhjMDQ5NDk4MTNiNTQ4ZTkwMDVlOTk2KTsKCiAgICAgICAgICAgIAogICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciByZWd1bGFyX3BvbHlnb25fbWFya2VyXzliYTk1MzkwM2RmOTQ4Y2E4ZjU4YjRhODlmMGU1MjU0ID0gbmV3IEwuUmVndWxhclBvbHlnb25NYXJrZXIoCiAgICAgICAgICAgICAgICBuZXcgTC5MYXRMbmcoMTguNTYyOTI1MzM3NzcxMDEsNzMuOTE4MDc2NDU5ODI5MTQpLAogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgIGljb24gOiBuZXcgTC5JY29uLkRlZmF1bHQoKSwKICAgICAgICAgICAgICAgICAgICBjb2xvcjogJ2JsdWUnLAogICAgICAgICAgICAgICAgICAgIG9wYWNpdHk6IDEsCiAgICAgICAgICAgICAgICAgICAgd2VpZ2h0OiAyLAogICAgICAgICAgICAgICAgICAgIGZpbGxDb2xvcjogJyMwZjBmMGYnLAogICAgICAgICAgICAgICAgICAgIGZpbGxPcGFjaXR5OiAwLjcsCiAgICAgICAgICAgICAgICAgICAgbnVtYmVyT2ZTaWRlczogNCwKICAgICAgICAgICAgICAgICAgICByb3RhdGlvbjogMCwKICAgICAgICAgICAgICAgICAgICByYWRpdXM6IDEwCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgKQogICAgICAgICAgICAgICAgLmFkZFRvKG1hcF9jMjMzOThlYTY0YWE0MTQ3YjQ4NTZhYWVjYjhmODgwNyk7CiAgICAgICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciBwb3B1cF9kM2M2NTgxY2I2NDc0ZWI1YjdmZDM5NGUzMjg2MmFlMyA9IEwucG9wdXAoe21heFdpZHRoOiAnMzAwJ30pOwoKICAgICAgICAgICAgCiAgICAgICAgICAgICAgICB2YXIgaHRtbF8wYjM0ODg2NjliZDU0NzY4YjBhZGJmNjI5MTZkYTU5NSA9ICQoJzxkaXYgaWQ9Imh0bWxfMGIzNDg4NjY5YmQ1NDc2OGIwYWRiZjYyOTE2ZGE1OTUiIHN0eWxlPSJ3aWR0aDogMTAwLjAlOyBoZWlnaHQ6IDEwMC4wJTsiPlRlYSBWaWxsYSBDYWZlPC9kaXY+JylbMF07CiAgICAgICAgICAgICAgICBwb3B1cF9kM2M2NTgxY2I2NDc0ZWI1YjdmZDM5NGUzMjg2MmFlMy5zZXRDb250ZW50KGh0bWxfMGIzNDg4NjY5YmQ1NDc2OGIwYWRiZjYyOTE2ZGE1OTUpOwogICAgICAgICAgICAKCiAgICAgICAgICAgIHJlZ3VsYXJfcG9seWdvbl9tYXJrZXJfOWJhOTUzOTAzZGY5NDhjYThmNThiNGE4OWYwZTUyNTQuYmluZFBvcHVwKHBvcHVwX2QzYzY1ODFjYjY0NzRlYjViN2ZkMzk0ZTMyODYyYWUzKTsKCiAgICAgICAgICAgIAogICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciByZWd1bGFyX3BvbHlnb25fbWFya2VyXzU0ZWU5OTZlMGExZjQwOGRiNGJkMzExNDU1NzVmODA3ID0gbmV3IEwuUmVndWxhclBvbHlnb25NYXJrZXIoCiAgICAgICAgICAgICAgICBuZXcgTC5MYXRMbmcoMTguNTYyNTc5NTc0NjY3ODY1LDczLjkxNjgzMzY3NjcwOTIpLAogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgIGljb24gOiBuZXcgTC5JY29uLkRlZmF1bHQoKSwKICAgICAgICAgICAgICAgICAgICBjb2xvcjogJ2JsdWUnLAogICAgICAgICAgICAgICAgICAgIG9wYWNpdHk6IDEsCiAgICAgICAgICAgICAgICAgICAgd2VpZ2h0OiAyLAogICAgICAgICAgICAgICAgICAgIGZpbGxDb2xvcjogJyMwZjBmMGYnLAogICAgICAgICAgICAgICAgICAgIGZpbGxPcGFjaXR5OiAwLjcsCiAgICAgICAgICAgICAgICAgICAgbnVtYmVyT2ZTaWRlczogNCwKICAgICAgICAgICAgICAgICAgICByb3RhdGlvbjogMCwKICAgICAgICAgICAgICAgICAgICByYWRpdXM6IDEwCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgKQogICAgICAgICAgICAgICAgLmFkZFRvKG1hcF9jMjMzOThlYTY0YWE0MTQ3YjQ4NTZhYWVjYjhmODgwNyk7CiAgICAgICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciBwb3B1cF83M2IxZWJkNWFiZDI0YjhiYjJlNjBjZGE2MjAxODZiNCA9IEwucG9wdXAoe21heFdpZHRoOiAnMzAwJ30pOwoKICAgICAgICAgICAgCiAgICAgICAgICAgICAgICB2YXIgaHRtbF9kNTI4ODk1MjRiYzA0MTg2YTUwZjAyZDA0N2U1YzFiNCA9ICQoJzxkaXYgaWQ9Imh0bWxfZDUyODg5NTI0YmMwNDE4NmE1MGYwMmQwNDdlNWMxYjQiIHN0eWxlPSJ3aWR0aDogMTAwLjAlOyBoZWlnaHQ6IDEwMC4wJTsiPlN0YXJidWNrczwvZGl2PicpWzBdOwogICAgICAgICAgICAgICAgcG9wdXBfNzNiMWViZDVhYmQyNGI4YmIyZTYwY2RhNjIwMTg2YjQuc2V0Q29udGVudChodG1sX2Q1Mjg4OTUyNGJjMDQxODZhNTBmMDJkMDQ3ZTVjMWI0KTsKICAgICAgICAgICAgCgogICAgICAgICAgICByZWd1bGFyX3BvbHlnb25fbWFya2VyXzU0ZWU5OTZlMGExZjQwOGRiNGJkMzExNDU1NzVmODA3LmJpbmRQb3B1cChwb3B1cF83M2IxZWJkNWFiZDI0YjhiYjJlNjBjZGE2MjAxODZiNCk7CgogICAgICAgICAgICAKICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgcmVndWxhcl9wb2x5Z29uX21hcmtlcl8yYWY4NTQ4ZTc2NDM0NDc0OTNlNzNkN2RjZjg3NDVjNiA9IG5ldyBMLlJlZ3VsYXJQb2x5Z29uTWFya2VyKAogICAgICAgICAgICAgICAgbmV3IEwuTGF0TG5nKDE4LjU2NjI4NjkxMzYzMDY3Nyw3My45MTk4NTA0MjY2MjE0NSksCiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgaWNvbiA6IG5ldyBMLkljb24uRGVmYXVsdCgpLAogICAgICAgICAgICAgICAgICAgIGNvbG9yOiAnYmx1ZScsCiAgICAgICAgICAgICAgICAgICAgb3BhY2l0eTogMSwKICAgICAgICAgICAgICAgICAgICB3ZWlnaHQ6IDIsCiAgICAgICAgICAgICAgICAgICAgZmlsbENvbG9yOiAnIzBmMGYwZicsCiAgICAgICAgICAgICAgICAgICAgZmlsbE9wYWNpdHk6IDAuNywKICAgICAgICAgICAgICAgICAgICBudW1iZXJPZlNpZGVzOiA0LAogICAgICAgICAgICAgICAgICAgIHJvdGF0aW9uOiAwLAogICAgICAgICAgICAgICAgICAgIHJhZGl1czogMTAKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICAuYWRkVG8obWFwX2MyMzM5OGVhNjRhYTQxNDdiNDg1NmFhZWNiOGY4ODA3KTsKICAgICAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIHBvcHVwXzUzMDE0YjRiNzhhMjRkZGE5ZWJjMmQ1MGMzZjY4ZjNkID0gTC5wb3B1cCh7bWF4V2lkdGg6ICczMDAnfSk7CgogICAgICAgICAgICAKICAgICAgICAgICAgICAgIHZhciBodG1sXzgzMWIxNDYyNGMyYzQ0Njk4Y2MxNGJmMTU4NGYyYTJkID0gJCgnPGRpdiBpZD0iaHRtbF84MzFiMTQ2MjRjMmM0NDY5OGNjMTRiZjE1ODRmMmEyZCIgc3R5bGU9IndpZHRoOiAxMDAuMCU7IGhlaWdodDogMTAwLjAlOyI+TGFyZ28gUGl6emVyaWE8L2Rpdj4nKVswXTsKICAgICAgICAgICAgICAgIHBvcHVwXzUzMDE0YjRiNzhhMjRkZGE5ZWJjMmQ1MGMzZjY4ZjNkLnNldENvbnRlbnQoaHRtbF84MzFiMTQ2MjRjMmM0NDY5OGNjMTRiZjE1ODRmMmEyZCk7CiAgICAgICAgICAgIAoKICAgICAgICAgICAgcmVndWxhcl9wb2x5Z29uX21hcmtlcl8yYWY4NTQ4ZTc2NDM0NDc0OTNlNzNkN2RjZjg3NDVjNi5iaW5kUG9wdXAocG9wdXBfNTMwMTRiNGI3OGEyNGRkYTllYmMyZDUwYzNmNjhmM2QpOwoKICAgICAgICAgICAgCiAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIHJlZ3VsYXJfcG9seWdvbl9tYXJrZXJfY2JkNWQzYmRlMGE5NGFkODliMzVlNzMxNWZlNGZkYmUgPSBuZXcgTC5SZWd1bGFyUG9seWdvbk1hcmtlcigKICAgICAgICAgICAgICAgIG5ldyBMLkxhdExuZygxOC41NjcxNDI4MTg1MjI2Niw3My45MTg5ODUzMzk3MjUxNSksCiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgaWNvbiA6IG5ldyBMLkljb24uRGVmYXVsdCgpLAogICAgICAgICAgICAgICAgICAgIGNvbG9yOiAnYmx1ZScsCiAgICAgICAgICAgICAgICAgICAgb3BhY2l0eTogMSwKICAgICAgICAgICAgICAgICAgICB3ZWlnaHQ6IDIsCiAgICAgICAgICAgICAgICAgICAgZmlsbENvbG9yOiAnIzBmMGYwZicsCiAgICAgICAgICAgICAgICAgICAgZmlsbE9wYWNpdHk6IDAuNywKICAgICAgICAgICAgICAgICAgICBudW1iZXJPZlNpZGVzOiA0LAogICAgICAgICAgICAgICAgICAgIHJvdGF0aW9uOiAwLAogICAgICAgICAgICAgICAgICAgIHJhZGl1czogMTAKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICAuYWRkVG8obWFwX2MyMzM5OGVhNjRhYTQxNDdiNDg1NmFhZWNiOGY4ODA3KTsKICAgICAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIHBvcHVwX2M2M2EwOGQ5ZTIyMjQwNTI4ODhiNTkwNTEwMDEyOGQ4ID0gTC5wb3B1cCh7bWF4V2lkdGg6ICczMDAnfSk7CgogICAgICAgICAgICAKICAgICAgICAgICAgICAgIHZhciBodG1sXzU0NmExMWJjNWI3NzQzYmE4YjcxZDk1YThhOTRmMTdjID0gJCgnPGRpdiBpZD0iaHRtbF81NDZhMTFiYzViNzc0M2JhOGI3MWQ5NWE4YTk0ZjE3YyIgc3R5bGU9IndpZHRoOiAxMDAuMCU7IGhlaWdodDogMTAwLjAlOyI+RmFybWFpc2ggUmVzdGF1cmFudCBhbmQgTG91bmdlPC9kaXY+JylbMF07CiAgICAgICAgICAgICAgICBwb3B1cF9jNjNhMDhkOWUyMjI0MDUyODg4YjU5MDUxMDAxMjhkOC5zZXRDb250ZW50KGh0bWxfNTQ2YTExYmM1Yjc3NDNiYThiNzFkOTVhOGE5NGYxN2MpOwogICAgICAgICAgICAKCiAgICAgICAgICAgIHJlZ3VsYXJfcG9seWdvbl9tYXJrZXJfY2JkNWQzYmRlMGE5NGFkODliMzVlNzMxNWZlNGZkYmUuYmluZFBvcHVwKHBvcHVwX2M2M2EwOGQ5ZTIyMjQwNTI4ODhiNTkwNTEwMDEyOGQ4KTsKCiAgICAgICAgICAgIAogICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciByZWd1bGFyX3BvbHlnb25fbWFya2VyX2MzMGQwOGViNjM0NDQ4MzliZjAwN2I5MjRlNmUwZjY5ID0gbmV3IEwuUmVndWxhclBvbHlnb25NYXJrZXIoCiAgICAgICAgICAgICAgICBuZXcgTC5MYXRMbmcoMTguNTYyNjM0OTM3MDEyMzg3LDczLjkxNjcyNDA0MjkzODM3KSwKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICBpY29uIDogbmV3IEwuSWNvbi5EZWZhdWx0KCksCiAgICAgICAgICAgICAgICAgICAgY29sb3I6ICdibHVlJywKICAgICAgICAgICAgICAgICAgICBvcGFjaXR5OiAxLAogICAgICAgICAgICAgICAgICAgIHdlaWdodDogMiwKICAgICAgICAgICAgICAgICAgICBmaWxsQ29sb3I6ICcjMGYwZjBmJywKICAgICAgICAgICAgICAgICAgICBmaWxsT3BhY2l0eTogMC43LAogICAgICAgICAgICAgICAgICAgIG51bWJlck9mU2lkZXM6IDQsCiAgICAgICAgICAgICAgICAgICAgcm90YXRpb246IDAsCiAgICAgICAgICAgICAgICAgICAgcmFkaXVzOiAxMAogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgIC5hZGRUbyhtYXBfYzIzMzk4ZWE2NGFhNDE0N2I0ODU2YWFlY2I4Zjg4MDcpOwogICAgICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgcG9wdXBfZDc3MGNkZjBjNDA1NGViZjg2MGFlZDA4MmIyZDA1ZDEgPSBMLnBvcHVwKHttYXhXaWR0aDogJzMwMCd9KTsKCiAgICAgICAgICAgIAogICAgICAgICAgICAgICAgdmFyIGh0bWxfYWVlYjgxMWRlYmJlNGI0ZmFhMGRjYTFkYzA0MjZiNTAgPSAkKCc8ZGl2IGlkPSJodG1sX2FlZWI4MTFkZWJiZTRiNGZhYTBkY2ExZGMwNDI2YjUwIiBzdHlsZT0id2lkdGg6IDEwMC4wJTsgaGVpZ2h0OiAxMDAuMCU7Ij5DcmVhbSBDZW50cmU8L2Rpdj4nKVswXTsKICAgICAgICAgICAgICAgIHBvcHVwX2Q3NzBjZGYwYzQwNTRlYmY4NjBhZWQwODJiMmQwNWQxLnNldENvbnRlbnQoaHRtbF9hZWViODExZGViYmU0YjRmYWEwZGNhMWRjMDQyNmI1MCk7CiAgICAgICAgICAgIAoKICAgICAgICAgICAgcmVndWxhcl9wb2x5Z29uX21hcmtlcl9jMzBkMDhlYjYzNDQ0ODM5YmYwMDdiOTI0ZTZlMGY2OS5iaW5kUG9wdXAocG9wdXBfZDc3MGNkZjBjNDA1NGViZjg2MGFlZDA4MmIyZDA1ZDEpOwoKICAgICAgICAgICAgCiAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIHJlZ3VsYXJfcG9seWdvbl9tYXJrZXJfMjY5M2Q3YmJkYWNhNGRlZWI5YmY5OTlkZGZmNjBhNDAgPSBuZXcgTC5SZWd1bGFyUG9seWdvbk1hcmtlcigKICAgICAgICAgICAgICAgIG5ldyBMLkxhdExuZygxOC41NjIzOTg1MjIwMTM2NTIsNzMuOTE2NTM1MjA5Mzk4MjIpLAogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgIGljb24gOiBuZXcgTC5JY29uLkRlZmF1bHQoKSwKICAgICAgICAgICAgICAgICAgICBjb2xvcjogJ2JsdWUnLAogICAgICAgICAgICAgICAgICAgIG9wYWNpdHk6IDEsCiAgICAgICAgICAgICAgICAgICAgd2VpZ2h0OiAyLAogICAgICAgICAgICAgICAgICAgIGZpbGxDb2xvcjogJyMwZjBmMGYnLAogICAgICAgICAgICAgICAgICAgIGZpbGxPcGFjaXR5OiAwLjcsCiAgICAgICAgICAgICAgICAgICAgbnVtYmVyT2ZTaWRlczogNCwKICAgICAgICAgICAgICAgICAgICByb3RhdGlvbjogMCwKICAgICAgICAgICAgICAgICAgICByYWRpdXM6IDEwCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgKQogICAgICAgICAgICAgICAgLmFkZFRvKG1hcF9jMjMzOThlYTY0YWE0MTQ3YjQ4NTZhYWVjYjhmODgwNyk7CiAgICAgICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciBwb3B1cF9iY2E2NzgxMTlmNzM0ZWRmYmM1ZTY3OWI5YmQ0YjAwMyA9IEwucG9wdXAoe21heFdpZHRoOiAnMzAwJ30pOwoKICAgICAgICAgICAgCiAgICAgICAgICAgICAgICB2YXIgaHRtbF80ZDU0MDJhMjdhZGY0ZGJmODJiMWE3NTE4OTBjOGJhZCA9ICQoJzxkaXYgaWQ9Imh0bWxfNGQ1NDAyYTI3YWRmNGRiZjgyYjFhNzUxODkwYzhiYWQiIHN0eWxlPSJ3aWR0aDogMTAwLjAlOyBoZWlnaHQ6IDEwMC4wJTsiPkZvb2RoYWxsPC9kaXY+JylbMF07CiAgICAgICAgICAgICAgICBwb3B1cF9iY2E2NzgxMTlmNzM0ZWRmYmM1ZTY3OWI5YmQ0YjAwMy5zZXRDb250ZW50KGh0bWxfNGQ1NDAyYTI3YWRmNGRiZjgyYjFhNzUxODkwYzhiYWQpOwogICAgICAgICAgICAKCiAgICAgICAgICAgIHJlZ3VsYXJfcG9seWdvbl9tYXJrZXJfMjY5M2Q3YmJkYWNhNGRlZWI5YmY5OTlkZGZmNjBhNDAuYmluZFBvcHVwKHBvcHVwX2JjYTY3ODExOWY3MzRlZGZiYzVlNjc5YjliZDRiMDAzKTsKCiAgICAgICAgICAgIAogICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciByZWd1bGFyX3BvbHlnb25fbWFya2VyXzBmNTFmNTljMzViYTQ4MDI4ZWZiMzIwZjJjY2M0NmRiID0gbmV3IEwuUmVndWxhclBvbHlnb25NYXJrZXIoCiAgICAgICAgICAgICAgICBuZXcgTC5MYXRMbmcoMTguNTY1Mzk5NTQwNTc4OTQ0LDczLjkxNTE2ODY1NDE1NDM3KSwKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICBpY29uIDogbmV3IEwuSWNvbi5EZWZhdWx0KCksCiAgICAgICAgICAgICAgICAgICAgY29sb3I6ICdibHVlJywKICAgICAgICAgICAgICAgICAgICBvcGFjaXR5OiAxLAogICAgICAgICAgICAgICAgICAgIHdlaWdodDogMiwKICAgICAgICAgICAgICAgICAgICBmaWxsQ29sb3I6ICcjMGYwZjBmJywKICAgICAgICAgICAgICAgICAgICBmaWxsT3BhY2l0eTogMC43LAogICAgICAgICAgICAgICAgICAgIG51bWJlck9mU2lkZXM6IDQsCiAgICAgICAgICAgICAgICAgICAgcm90YXRpb246IDAsCiAgICAgICAgICAgICAgICAgICAgcmFkaXVzOiAxMAogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgIC5hZGRUbyhtYXBfYzIzMzk4ZWE2NGFhNDE0N2I0ODU2YWFlY2I4Zjg4MDcpOwogICAgICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgcG9wdXBfNWRmOWRiZDBlYTBlNDkwMzgxN2QwNzc2ZTAzMjJkMmIgPSBMLnBvcHVwKHttYXhXaWR0aDogJzMwMCd9KTsKCiAgICAgICAgICAgIAogICAgICAgICAgICAgICAgdmFyIGh0bWxfNWFjYzJiZDc3NGUxNDQyYmI0ZjJiYjU1YTBlODY5MWUgPSAkKCc8ZGl2IGlkPSJodG1sXzVhY2MyYmQ3NzRlMTQ0MmJiNGYyYmI1NWEwZTg2OTFlIiBzdHlsZT0id2lkdGg6IDEwMC4wJTsgaGVpZ2h0OiAxMDAuMCU7Ij5TdWphdGEgTWFzdGFuaTwvZGl2PicpWzBdOwogICAgICAgICAgICAgICAgcG9wdXBfNWRmOWRiZDBlYTBlNDkwMzgxN2QwNzc2ZTAzMjJkMmIuc2V0Q29udGVudChodG1sXzVhY2MyYmQ3NzRlMTQ0MmJiNGYyYmI1NWEwZTg2OTFlKTsKICAgICAgICAgICAgCgogICAgICAgICAgICByZWd1bGFyX3BvbHlnb25fbWFya2VyXzBmNTFmNTljMzViYTQ4MDI4ZWZiMzIwZjJjY2M0NmRiLmJpbmRQb3B1cChwb3B1cF81ZGY5ZGJkMGVhMGU0OTAzODE3ZDA3NzZlMDMyMmQyYik7CgogICAgICAgICAgICAKICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgcmVndWxhcl9wb2x5Z29uX21hcmtlcl9jYWM1MGI3N2MxYzc0MzM1YmZiZDQyNTNiMDM5NDg4NiA9IG5ldyBMLlJlZ3VsYXJQb2x5Z29uTWFya2VyKAogICAgICAgICAgICAgICAgbmV3IEwuTGF0TG5nKDE4LjU2MjQyMDEzMzUwNjU5LDczLjkxNjY4MDI3MDY2MTE3KSwKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICBpY29uIDogbmV3IEwuSWNvbi5EZWZhdWx0KCksCiAgICAgICAgICAgICAgICAgICAgY29sb3I6ICdibHVlJywKICAgICAgICAgICAgICAgICAgICBvcGFjaXR5OiAxLAogICAgICAgICAgICAgICAgICAgIHdlaWdodDogMiwKICAgICAgICAgICAgICAgICAgICBmaWxsQ29sb3I6ICcjMGYwZjBmJywKICAgICAgICAgICAgICAgICAgICBmaWxsT3BhY2l0eTogMC43LAogICAgICAgICAgICAgICAgICAgIG51bWJlck9mU2lkZXM6IDQsCiAgICAgICAgICAgICAgICAgICAgcm90YXRpb246IDAsCiAgICAgICAgICAgICAgICAgICAgcmFkaXVzOiAxMAogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgIC5hZGRUbyhtYXBfYzIzMzk4ZWE2NGFhNDE0N2I0ODU2YWFlY2I4Zjg4MDcpOwogICAgICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgcG9wdXBfZjA0MDY2OGE2MDczNDE4N2EwOTM0MzFkNjA4NDA5ZjQgPSBMLnBvcHVwKHttYXhXaWR0aDogJzMwMCd9KTsKCiAgICAgICAgICAgIAogICAgICAgICAgICAgICAgdmFyIGh0bWxfMDkxODg1OTYwNTUzNDUzZmE2MDE3NWMxMGUzZTI0N2IgPSAkKCc8ZGl2IGlkPSJodG1sXzA5MTg4NTk2MDU1MzQ1M2ZhNjAxNzVjMTBlM2UyNDdiIiBzdHlsZT0id2lkdGg6IDEwMC4wJTsgaGVpZ2h0OiAxMDAuMCU7Ij5aYXJhPC9kaXY+JylbMF07CiAgICAgICAgICAgICAgICBwb3B1cF9mMDQwNjY4YTYwNzM0MTg3YTA5MzQzMWQ2MDg0MDlmNC5zZXRDb250ZW50KGh0bWxfMDkxODg1OTYwNTUzNDUzZmE2MDE3NWMxMGUzZTI0N2IpOwogICAgICAgICAgICAKCiAgICAgICAgICAgIHJlZ3VsYXJfcG9seWdvbl9tYXJrZXJfY2FjNTBiNzdjMWM3NDMzNWJmYmQ0MjUzYjAzOTQ4ODYuYmluZFBvcHVwKHBvcHVwX2YwNDA2NjhhNjA3MzQxODdhMDkzNDMxZDYwODQwOWY0KTsKCiAgICAgICAgICAgIAogICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciByZWd1bGFyX3BvbHlnb25fbWFya2VyX2JmNGUyMThkYjQxOTRjODU5YjQ5NzU3N2FkNWIyMGVhID0gbmV3IEwuUmVndWxhclBvbHlnb25NYXJrZXIoCiAgICAgICAgICAgICAgICBuZXcgTC5MYXRMbmcoMTguNTYyNDgzMjQ5NjQ5MTg3LDczLjkxNjUwMTIwMjk4Mzc4KSwKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICBpY29uIDogbmV3IEwuSWNvbi5EZWZhdWx0KCksCiAgICAgICAgICAgICAgICAgICAgY29sb3I6ICdibHVlJywKICAgICAgICAgICAgICAgICAgICBvcGFjaXR5OiAxLAogICAgICAgICAgICAgICAgICAgIHdlaWdodDogMiwKICAgICAgICAgICAgICAgICAgICBmaWxsQ29sb3I6ICcjMGYwZjBmJywKICAgICAgICAgICAgICAgICAgICBmaWxsT3BhY2l0eTogMC43LAogICAgICAgICAgICAgICAgICAgIG51bWJlck9mU2lkZXM6IDQsCiAgICAgICAgICAgICAgICAgICAgcm90YXRpb246IDAsCiAgICAgICAgICAgICAgICAgICAgcmFkaXVzOiAxMAogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgIC5hZGRUbyhtYXBfYzIzMzk4ZWE2NGFhNDE0N2I0ODU2YWFlY2I4Zjg4MDcpOwogICAgICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgcG9wdXBfNjZmOTNhMGRlMzhlNGJiZmFiZWNhOGQyMTEyMTBkYmQgPSBMLnBvcHVwKHttYXhXaWR0aDogJzMwMCd9KTsKCiAgICAgICAgICAgIAogICAgICAgICAgICAgICAgdmFyIGh0bWxfMmQwNzEzMWQ1ZDE2NDc4YWE2N2RjN2I2MTg1ZTQxZjMgPSAkKCc8ZGl2IGlkPSJodG1sXzJkMDcxMzFkNWQxNjQ3OGFhNjdkYzdiNjE4NWU0MWYzIiBzdHlsZT0id2lkdGg6IDEwMC4wJTsgaGVpZ2h0OiAxMDAuMCU7Ij5DcmF6eSBOb29kbGVzPC9kaXY+JylbMF07CiAgICAgICAgICAgICAgICBwb3B1cF82NmY5M2EwZGUzOGU0YmJmYWJlY2E4ZDIxMTIxMGRiZC5zZXRDb250ZW50KGh0bWxfMmQwNzEzMWQ1ZDE2NDc4YWE2N2RjN2I2MTg1ZTQxZjMpOwogICAgICAgICAgICAKCiAgICAgICAgICAgIHJlZ3VsYXJfcG9seWdvbl9tYXJrZXJfYmY0ZTIxOGRiNDE5NGM4NTliNDk3NTc3YWQ1YjIwZWEuYmluZFBvcHVwKHBvcHVwXzY2ZjkzYTBkZTM4ZTRiYmZhYmVjYThkMjExMjEwZGJkKTsKCiAgICAgICAgICAgIAogICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciByZWd1bGFyX3BvbHlnb25fbWFya2VyXzc4MzUwYTU3MmE5YjQ0ODFiZjgzYzA5ZDNiNTY1M2M4ID0gbmV3IEwuUmVndWxhclBvbHlnb25NYXJrZXIoCiAgICAgICAgICAgICAgICBuZXcgTC5MYXRMbmcoMTguNTY1MTM3Mjc2OTQ1MDg0LDczLjkxMTQ4MzU0MzUyMzg5KSwKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICBpY29uIDogbmV3IEwuSWNvbi5EZWZhdWx0KCksCiAgICAgICAgICAgICAgICAgICAgY29sb3I6ICdibHVlJywKICAgICAgICAgICAgICAgICAgICBvcGFjaXR5OiAxLAogICAgICAgICAgICAgICAgICAgIHdlaWdodDogMiwKICAgICAgICAgICAgICAgICAgICBmaWxsQ29sb3I6ICcjMGYwZjBmJywKICAgICAgICAgICAgICAgICAgICBmaWxsT3BhY2l0eTogMC43LAogICAgICAgICAgICAgICAgICAgIG51bWJlck9mU2lkZXM6IDQsCiAgICAgICAgICAgICAgICAgICAgcm90YXRpb246IDAsCiAgICAgICAgICAgICAgICAgICAgcmFkaXVzOiAxMAogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgIC5hZGRUbyhtYXBfYzIzMzk4ZWE2NGFhNDE0N2I0ODU2YWFlY2I4Zjg4MDcpOwogICAgICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgcG9wdXBfZWFmOTdkMDZhMGIxNDY1MWI2MGZhY2VlOWNlZjFjM2UgPSBMLnBvcHVwKHttYXhXaWR0aDogJzMwMCd9KTsKCiAgICAgICAgICAgIAogICAgICAgICAgICAgICAgdmFyIGh0bWxfZDczNTczODk2NTA4NDVjOWI0OTdjZjRhY2M1Mjc5MDUgPSAkKCc8ZGl2IGlkPSJodG1sX2Q3MzU3Mzg5NjUwODQ1YzliNDk3Y2Y0YWNjNTI3OTA1IiBzdHlsZT0id2lkdGg6IDEwMC4wJTsgaGVpZ2h0OiAxMDAuMCU7Ij5QdW5qYWJpIERoYWJhPC9kaXY+JylbMF07CiAgICAgICAgICAgICAgICBwb3B1cF9lYWY5N2QwNmEwYjE0NjUxYjYwZmFjZWU5Y2VmMWMzZS5zZXRDb250ZW50KGh0bWxfZDczNTczODk2NTA4NDVjOWI0OTdjZjRhY2M1Mjc5MDUpOwogICAgICAgICAgICAKCiAgICAgICAgICAgIHJlZ3VsYXJfcG9seWdvbl9tYXJrZXJfNzgzNTBhNTcyYTliNDQ4MWJmODNjMDlkM2I1NjUzYzguYmluZFBvcHVwKHBvcHVwX2VhZjk3ZDA2YTBiMTQ2NTFiNjBmYWNlZTljZWYxYzNlKTsKCiAgICAgICAgICAgIAogICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciByZWd1bGFyX3BvbHlnb25fbWFya2VyXzFiMTE1MDljNGY4MDRhMmJhM2M0MWQ3NjgwNjYzM2U2ID0gbmV3IEwuUmVndWxhclBvbHlnb25NYXJrZXIoCiAgICAgICAgICAgICAgICBuZXcgTC5MYXRMbmcoMTguNTY1NTgyOTk0NTQwNzIsNzMuOTEwOTQzMTE0Njg3OSksCiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgaWNvbiA6IG5ldyBMLkljb24uRGVmYXVsdCgpLAogICAgICAgICAgICAgICAgICAgIGNvbG9yOiAnYmx1ZScsCiAgICAgICAgICAgICAgICAgICAgb3BhY2l0eTogMSwKICAgICAgICAgICAgICAgICAgICB3ZWlnaHQ6IDIsCiAgICAgICAgICAgICAgICAgICAgZmlsbENvbG9yOiAnIzBmMGYwZicsCiAgICAgICAgICAgICAgICAgICAgZmlsbE9wYWNpdHk6IDAuNywKICAgICAgICAgICAgICAgICAgICBudW1iZXJPZlNpZGVzOiA0LAogICAgICAgICAgICAgICAgICAgIHJvdGF0aW9uOiAwLAogICAgICAgICAgICAgICAgICAgIHJhZGl1czogMTAKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICAuYWRkVG8obWFwX2MyMzM5OGVhNjRhYTQxNDdiNDg1NmFhZWNiOGY4ODA3KTsKICAgICAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIHBvcHVwX2I4OTg3NTM0OGY2YzQ3NjBiYWUzNzVmZTZkZjFkYmM5ID0gTC5wb3B1cCh7bWF4V2lkdGg6ICczMDAnfSk7CgogICAgICAgICAgICAKICAgICAgICAgICAgICAgIHZhciBodG1sXzAxNWYzM2VmYThkYTRkNTE4MjY2NmE5Y2JiNjJmMDg1ID0gJCgnPGRpdiBpZD0iaHRtbF8wMTVmMzNlZmE4ZGE0ZDUxODI2NjZhOWNiYjYyZjA4NSIgc3R5bGU9IndpZHRoOiAxMDAuMCU7IGhlaWdodDogMTAwLjAlOyI+Q2FmZSBNaWxhbm88L2Rpdj4nKVswXTsKICAgICAgICAgICAgICAgIHBvcHVwX2I4OTg3NTM0OGY2YzQ3NjBiYWUzNzVmZTZkZjFkYmM5LnNldENvbnRlbnQoaHRtbF8wMTVmMzNlZmE4ZGE0ZDUxODI2NjZhOWNiYjYyZjA4NSk7CiAgICAgICAgICAgIAoKICAgICAgICAgICAgcmVndWxhcl9wb2x5Z29uX21hcmtlcl8xYjExNTA5YzRmODA0YTJiYTNjNDFkNzY4MDY2MzNlNi5iaW5kUG9wdXAocG9wdXBfYjg5ODc1MzQ4ZjZjNDc2MGJhZTM3NWZlNmRmMWRiYzkpOwoKICAgICAgICAgICAgCiAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIHJlZ3VsYXJfcG9seWdvbl9tYXJrZXJfNmE5MTliZDUxYjMxNGMxN2FkMWU4MWQ4MWJmNmIxYzggPSBuZXcgTC5SZWd1bGFyUG9seWdvbk1hcmtlcigKICAgICAgICAgICAgICAgIG5ldyBMLkxhdExuZygxOC41NjUwMTgwOTM1NjIyMSw3My45MTEwMDI4OTUwNTIpLAogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgIGljb24gOiBuZXcgTC5JY29uLkRlZmF1bHQoKSwKICAgICAgICAgICAgICAgICAgICBjb2xvcjogJ2JsdWUnLAogICAgICAgICAgICAgICAgICAgIG9wYWNpdHk6IDEsCiAgICAgICAgICAgICAgICAgICAgd2VpZ2h0OiAyLAogICAgICAgICAgICAgICAgICAgIGZpbGxDb2xvcjogJyMwZjBmMGYnLAogICAgICAgICAgICAgICAgICAgIGZpbGxPcGFjaXR5OiAwLjcsCiAgICAgICAgICAgICAgICAgICAgbnVtYmVyT2ZTaWRlczogNCwKICAgICAgICAgICAgICAgICAgICByb3RhdGlvbjogMCwKICAgICAgICAgICAgICAgICAgICByYWRpdXM6IDEwCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgKQogICAgICAgICAgICAgICAgLmFkZFRvKG1hcF9jMjMzOThlYTY0YWE0MTQ3YjQ4NTZhYWVjYjhmODgwNyk7CiAgICAgICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciBwb3B1cF82MzA4YjUyNjdiM2I0YzUzYmYwOWUwODI5Njc4MmNjZSA9IEwucG9wdXAoe21heFdpZHRoOiAnMzAwJ30pOwoKICAgICAgICAgICAgCiAgICAgICAgICAgICAgICB2YXIgaHRtbF8wNTIyNDI3MmNkNzA0NTM4OTlkYjIyMjg4NDhmZTYzOSA9ICQoJzxkaXYgaWQ9Imh0bWxfMDUyMjQyNzJjZDcwNDUzODk5ZGIyMjI4ODQ4ZmU2MzkiIHN0eWxlPSJ3aWR0aDogMTAwLjAlOyBoZWlnaHQ6IDEwMC4wJTsiPkNhZmUgQ29mZmVlIERheTwvZGl2PicpWzBdOwogICAgICAgICAgICAgICAgcG9wdXBfNjMwOGI1MjY3YjNiNGM1M2JmMDllMDgyOTY3ODJjY2Uuc2V0Q29udGVudChodG1sXzA1MjI0MjcyY2Q3MDQ1Mzg5OWRiMjIyODg0OGZlNjM5KTsKICAgICAgICAgICAgCgogICAgICAgICAgICByZWd1bGFyX3BvbHlnb25fbWFya2VyXzZhOTE5YmQ1MWIzMTRjMTdhZDFlODFkODFiZjZiMWM4LmJpbmRQb3B1cChwb3B1cF82MzA4YjUyNjdiM2I0YzUzYmYwOWUwODI5Njc4MmNjZSk7CgogICAgICAgICAgICAKICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgcmVndWxhcl9wb2x5Z29uX21hcmtlcl9hNjQ5YzdlZjcyOWY0OWNhYjQ1YTZiM2RlZTQ4OTYyNCA9IG5ldyBMLlJlZ3VsYXJQb2x5Z29uTWFya2VyKAogICAgICAgICAgICAgICAgbmV3IEwuTGF0TG5nKDE4LjU2NTE0MzI2NTg5MTE4LDczLjkxMTk4NzM1MDE5NzQ4KSwKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICBpY29uIDogbmV3IEwuSWNvbi5EZWZhdWx0KCksCiAgICAgICAgICAgICAgICAgICAgY29sb3I6ICdibHVlJywKICAgICAgICAgICAgICAgICAgICBvcGFjaXR5OiAxLAogICAgICAgICAgICAgICAgICAgIHdlaWdodDogMiwKICAgICAgICAgICAgICAgICAgICBmaWxsQ29sb3I6ICcjMGYwZjBmJywKICAgICAgICAgICAgICAgICAgICBmaWxsT3BhY2l0eTogMC43LAogICAgICAgICAgICAgICAgICAgIG51bWJlck9mU2lkZXM6IDQsCiAgICAgICAgICAgICAgICAgICAgcm90YXRpb246IDAsCiAgICAgICAgICAgICAgICAgICAgcmFkaXVzOiAxMAogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgIC5hZGRUbyhtYXBfYzIzMzk4ZWE2NGFhNDE0N2I0ODU2YWFlY2I4Zjg4MDcpOwogICAgICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgcG9wdXBfNTRmNDU4YzM2NjE1NGI0Mjk4MGNiNjkxZTQxOGZkYTMgPSBMLnBvcHVwKHttYXhXaWR0aDogJzMwMCd9KTsKCiAgICAgICAgICAgIAogICAgICAgICAgICAgICAgdmFyIGh0bWxfNmZkOGFmMDBlMjBmNDYwYmJjNjRiOGJiZTBkMTlhOTkgPSAkKCc8ZGl2IGlkPSJodG1sXzZmZDhhZjAwZTIwZjQ2MGJiYzY0YjhiYmUwZDE5YTk5IiBzdHlsZT0id2lkdGg6IDEwMC4wJTsgaGVpZ2h0OiAxMDAuMCU7Ij5Nb2dhYSBQYXJhdGhhPC9kaXY+JylbMF07CiAgICAgICAgICAgICAgICBwb3B1cF81NGY0NThjMzY2MTU0YjQyOTgwY2I2OTFlNDE4ZmRhMy5zZXRDb250ZW50KGh0bWxfNmZkOGFmMDBlMjBmNDYwYmJjNjRiOGJiZTBkMTlhOTkpOwogICAgICAgICAgICAKCiAgICAgICAgICAgIHJlZ3VsYXJfcG9seWdvbl9tYXJrZXJfYTY0OWM3ZWY3MjlmNDljYWI0NWE2YjNkZWU0ODk2MjQuYmluZFBvcHVwKHBvcHVwXzU0ZjQ1OGMzNjYxNTRiNDI5ODBjYjY5MWU0MThmZGEzKTsKCiAgICAgICAgICAgIAogICAgICAgIAo8L3NjcmlwdD4=\" style=\"position:absolute;width:100%;height:100%;left:0;top:0;border:none !important;\" allowfullscreen webkitallowfullscreen mozallowfullscreen></iframe></div></div>", 
                        "text/plain": "<folium.folium.Map at 0x7f1408201a20>"
                    }, 
                    "output_type": "execute_result"
                }
            ], 
            "source": "# create map of Pune place  using latitude and longitude values\nmap_sg = folium.Map(location=[latitude, longitude], zoom_start=20)\n\n# add markers to map\nfor lat, lng, label in zip(SGnearby_venues['lat'], SGnearby_venues['lng'], SGnearby_venues['name']):\n    label = folium.Popup(label, parse_html=True)\n    folium.RegularPolygonMarker(\n        [lat, lng],\n        number_of_sides=4,\n        radius=10,\n        popup=label,\n        color='blue',\n        fill_color='#0f0f0f',\n        fill_opacity=0.7,\n    ).add_to(map_sg)  \n    \nmap_sg"
        }, 
        {
            "source": "The week 2 assignment is in a different notebook named- Battle of Neighbourhoods week 2", 
            "cell_type": "markdown", 
            "metadata": {}
        }, 
        {
            "source": "### Thank You", 
            "cell_type": "markdown", 
            "metadata": {}
        }
    ], 
    "metadata": {
        "kernelspec": {
            "display_name": "Python 3.6", 
            "name": "python3", 
            "language": "python"
        }, 
        "language_info": {
            "mimetype": "text/x-python", 
            "nbconvert_exporter": "python", 
            "version": "3.6.8", 
            "name": "python", 
            "file_extension": ".py", 
            "pygments_lexer": "ipython3", 
            "codemirror_mode": {
                "version": 3, 
                "name": "ipython"
            }
        }
    }, 
    "nbformat": 4
}